{"version":3,"file":"c2d2-es.min.js","sources":["../src/c2d2.js"],"sourcesContent":["/* eslint-env node */\r\n\r\n/**\r\n* @todo Switch to ES6 modules and build to `dist` with Rollup\r\n* @todo Resume ensuring properties/methods are added and any todos noted for potential to accept specific arguments as wrapped objects or return wrapped items: {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dfnReturnLink-0}\r\n* @todo add with package.json (including Node dependencies) to npm\r\n* @todo Add tests, including for window, Node, AMD\r\n* @todo Add shim plugin dependency once ready\r\n*/\r\n\r\nfunction _forEach (arr, h) {\r\n    for (let i = 0, arrl = arr.length; i < arrl; i++) {\r\n        h(arr[i], i);\r\n    }\r\n}\r\n\r\nfunction _arrayify (begin) {\r\n    let coords,\r\n        args = arguments;\r\n    if (typeof begin === 'string') {\r\n        args = [];\r\n        coords = begin.trim().replace(/\\s*,\\s+/g, ', ').split(/\\s+/);\r\n\r\n        _forEach(coords, (item, idx) => {\r\n            args[idx] = item.split(', ');\r\n        });\r\n    }\r\n    return args;\r\n}\r\n\r\n// Adds NodeJS support, and exports interface to modules that require this module\r\nconst w = typeof window === 'undefined' ? global : window; // This should not be needed by Node\r\n\r\nfunction buildMethod (m) {\r\n    return function () {\r\n        this.parent[m].apply(this.parent, arguments);\r\n        return this;\r\n    };\r\n}\r\nfunction buildGetterMethod (gm, methodFromProperty, WrapperClass) {\r\n    return function (imageData) {\r\n        const args = [].slice.call(arguments);\r\n        if (gm === 'putImageData' && typeof imageData === 'object' && imageData.imageData) { // Todo: Hackish check for taking regular ImageData object\r\n            args[0] = imageData.imageData;\r\n        }\r\n        if (methodFromProperty) {\r\n            return new WrapperClass(this.parent[gm]);\r\n        }\r\n        return new WrapperClass(this.parent[gm].apply(this.parent, args));\r\n    };\r\n}\r\nfunction buildLiteralGetterMethod (gm) {\r\n    return function () {\r\n        return this.parent[gm].apply(this.parent, arguments);\r\n    };\r\n}\r\nfunction buildPropertyMethod (p) {\r\n    return function (value) {\r\n        if (value === undefined) {\r\n            return this.parent[p];\r\n        }\r\n        this.parent[p] = value;\r\n        return this;\r\n    };\r\n}\r\nfunction buildContextMethods (method) {\r\n    return function () {\r\n        method.apply(this, arguments);\r\n        return this;\r\n    };\r\n}\r\n// Todo: Wrap up any specific methods or properties which might be used on the opaque pattern and\r\n//     gradient child objects, if ever exposed, so that these can be properly wrapped and made chainable.\r\nconst DelegateChain = {\r\n    addMethods (methods, clss) {\r\n        for (let i = 0, methl = methods.length; i < methl; i++) {\r\n            const m = methods[i];\r\n            clss.prototype[m] = buildMethod(m);\r\n        }\r\n    },\r\n    addGetterMethods (getterMethods, clss, WrapperClass, methodFromProperty) {\r\n        for (let i = 0, gmethl = getterMethods.length; i < gmethl; i++) {\r\n            const gm = getterMethods[i];\r\n            if (WrapperClass) {\r\n                clss.prototype[gm] = buildGetterMethod(gm, methodFromProperty, WrapperClass);\r\n            } else { // For those which return a literal\r\n                clss.prototype[gm] = buildLiteralGetterMethod(gm);\r\n            }\r\n        }\r\n    },\r\n    addPropertyMethods (props, clss) {\r\n        for (let i = 0, propl = props.length; i < propl; i++) {\r\n            const p = props[i];\r\n            clss.prototype[p] = buildPropertyMethod(p);\r\n        }\r\n    }\r\n};\r\n\r\nfunction _C2D2CanvasPixelArraySetup () {\r\n    const props = ['length']; // We'll just use this commonly used accessor name\r\n    C2D2CanvasPixelArray.prototype.item = function (value, value2) {\r\n        if (value2 === undefined) {\r\n            return this.parent[value];\r\n        }\r\n        this.parent[value] = value2;\r\n        return this;\r\n    };\r\n    //  even though not part of standard interface (not specified)\r\n    DelegateChain.addPropertyMethods(props, C2D2CanvasPixelArray);\r\n}\r\n\r\nfunction C2D2CanvasPixelArray (canvasPixelArrayObj) {\r\n    if (!C2D2CanvasPixelArray.prototype.length) {\r\n        _C2D2CanvasPixelArraySetup();\r\n    }\r\n    this.parent = this.array = this.pixelArray = canvasPixelArrayObj;\r\n};\r\n\r\nfunction _C2D2ImageDataSetup () {\r\n    const props = [\r\n            'width', 'height', 'resolution' // Todo: The latter is read-only\r\n        ],\r\n        getterMethods = ['data'];\r\n    DelegateChain.addGetterMethods(getterMethods, C2D2ImageData, C2D2CanvasPixelArray, true);\r\n    DelegateChain.addPropertyMethods(props, C2D2ImageData);\r\n}\r\n\r\nfunction C2D2ImageData (imageDataObj) {\r\n    if (!C2D2ImageData.prototype.width) {\r\n        _C2D2ImageDataSetup();\r\n    }\r\n    this.parent = this.imageData = imageDataObj;\r\n};\r\n\r\nfunction _C2D2GradientSetup () {\r\n    const methods = ['addColorStop'];\r\n    DelegateChain.addMethods(methods, C2D2Gradient);\r\n}\r\n\r\n// Partly opaque\r\nfunction C2D2Gradient (gradientObj) {\r\n    if (!C2D2Gradient.prototype.addColorStop) {\r\n        _C2D2GradientSetup();\r\n    }\r\n    this.parent = this.gradient = gradientObj;\r\n}\r\n\r\n// function _C2D2PatternSetup () {\r\n//      Fully opaque\r\n// }\r\n\r\n// Fully opaque\r\n// If never any benefits to wrapping (with chainable new methods), just avoid making this child class\r\nfunction C2D2Pattern (patternObj) {\r\n    // if (!C2D2Pattern.prototype.width) { // no known properties/methods\r\n    //    _C2D2PatternSetup();\r\n    // }\r\n    this.parent = this.pattern = patternObj;\r\n    return patternObj; // Just return the object for now, as appears there will be no need to wrap\r\n}\r\n\r\nfunction _C2D2ContextSetup () {\r\n    // Predefined methods\r\n    const methods = [\r\n        'addHitRegion', 'arc', 'arcTo', 'beginPath', 'bezierCurveTo', 'clearRect',\r\n        'clip', 'closePath', 'commit', 'drawImage', 'drawSystemFocusRing', 'ellipse', 'fill', 'fillRect', 'fillText', 'getLineDash',\r\n        'lineTo', 'moveTo', 'quadraticCurveTo', 'rect', 'removeHitRegion', 'resetClip', 'resetTransform',\r\n        'restore', 'rotate', 'save', 'scale', 'scrollPathIntoView', 'setLineDash', 'setTransform',\r\n        'stroke', 'strokeRect', 'strokeText', 'transform', 'translate'\r\n    ]; // drawFocusRing not currently supported\r\n    // Todo: Implement these to be wrapped so can get and set data in their own child chains\r\n    // Todo: createPattern is a wholly opaque object, so might need to have child wrappers\r\n    //    if implementing any known methods in the future\r\n    const imageDataGetterMethods = ['createImageData', 'createImageDataHD', 'getImageData', 'getImageDataHD', 'putImageData', 'putImageDataHD'],\r\n        gradientGetterMethods = ['createLinearGradient', 'createRadialGradient'],\r\n        patternGetterMethods = ['createPattern'], // Todo: createPattern to accept wrapped canvas element or context?\r\n        // Do not return 'this' object since purpose is to get (and the objects they create don't have more than\r\n        // one method to make it desirable to chain, except for ImageData ones, moved to childGetterMethods\r\n        getterMethods = ['drawCustomFocusRing', 'isPointInPath', 'isPointInStroke', 'measureText']; // wrap TextMetrics of measureText?\r\n        // Predefined properties\r\n    const props = ['canvas', 'currentTransform', 'direction', 'fillStyle', 'font', 'globalAlpha',\r\n        'globalCompositeOperation', 'imageSmoothingEnabled',\r\n        'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit',\r\n        'shadowOffsetX', 'shadowOffsetY', 'shadowBlur', 'shadowColor',\r\n        'strokeStyle', 'textAlign', 'textBaseline']; // Todo: fillStyle and strokeStyle to return or be settable with wrapped CanvasGradient or CanvasPattern, currentTransform with wrapped SVGMatrix?\r\n\r\n    DelegateChain.addMethods(methods, C2D2Context);\r\n\r\n    DelegateChain.addGetterMethods(imageDataGetterMethods, C2D2Context, C2D2ImageData);\r\n    DelegateChain.addGetterMethods(gradientGetterMethods, C2D2Context, C2D2Gradient);\r\n    DelegateChain.addGetterMethods(patternGetterMethods, C2D2Context, C2D2Pattern);\r\n\r\n    DelegateChain.addGetterMethods(getterMethods, C2D2Context);\r\n\r\n    DelegateChain.addPropertyMethods(props, C2D2Context);\r\n}\r\n\r\nfunction c2d2Element (arr, opts) {\r\n    let parent, Canvas, fs, out, stream, path, width, height,\r\n        el = opts;\r\n    const d = w.document || null;\r\n    const noArray = typeof arr !== 'object' || !arr.length;\r\n\r\n    if (noArray) {\r\n        el = opts = arr;\r\n        arr = [];\r\n    } else {\r\n        opts = opts || {};\r\n    }\r\n    const bNodeModule = opts && (opts.path || opts.fileStream);\r\n\r\n    // Todo: deal with string w/h coords, number w/h coords\r\n    if (typeof opts === 'string') {\r\n        el = d.getElementById(opts);\r\n    } else if (typeof opts === 'object' && bNodeModule) {\r\n        Canvas = require('canvas');\r\n        el = new Canvas();\r\n        width = arr[0] || opts.width || opts.w;\r\n        height = arr[1] || opts.height || opts.h;\r\n        if (width) {\r\n            el.width = width;\r\n        }\r\n        if (height) {\r\n            el.height = height;\r\n        }\r\n        path = opts.fileStream || opts.path;\r\n        if (path) {\r\n            fs = require('fs');\r\n            out = fs.createWriteStream(path);\r\n            stream = el.createPNGStream();\r\n            stream.on('data', (chunk) => {\r\n                out.write(chunk);\r\n            });\r\n            stream.on('end', () => {\r\n                out.end();\r\n            });\r\n        }\r\n    } else if (typeof opts === 'object' && !opts.nodeName) {\r\n        el = (d.createElementNS && d.documentElement.namespaceURI !== null)\r\n            ? d.createElementNS('http://www.w3.org/1999/xhtml', 'canvas')\r\n            : d.createElement('canvas');\r\n        if (opts.width || opts.w) {\r\n            el.setAttribute('width', opts.width || opts.w);\r\n        }\r\n        if (opts.height || opts.h) {\r\n            el.setAttribute('height', opts.height || opts.h);\r\n        }\r\n        if (opts.id) {\r\n            el.setAttribute('id', opts.id);\r\n        }\r\n        if (opts.style) { // Better to use a class instead\r\n            el.setAttribute('style', opts.style);\r\n        }\r\n        if (opts.innerHTML) { // For fallback display\r\n            el.innerHTML = opts.innerHTML;\r\n        }\r\n        if (opts['class'] || opts.className) {\r\n            el.setAttribute('class', opts['class'] || opts.className);\r\n        }\r\n        parent = opts.appendTo\r\n            ? typeof opts.appendTo === 'string'\r\n                ? d.getElementById(opts.appendTo)\r\n                : opts.appendTo\r\n            : d.body;\r\n    } else if (opts === undefined) {\r\n        el = d.getElementsByTagName('canvas')[0];\r\n    }\r\n\r\n    if (!noArray && el.setAttribute) {\r\n        el.setAttribute('width', arr[0]);\r\n        el.setAttribute('height', arr[1]);\r\n    }\r\n    if (parent) {\r\n        parent.appendChild(el);\r\n    }\r\n\r\n    if (w.G_vmlCanvasManager) { // If using ExplorerCanvas to get IE support: http://code.google.com/p/explorercanvas/\r\n        el = w.G_vmlCanvasManager.initElement(el);\r\n    }\r\n    return el;\r\n};\r\n\r\n/**\r\n* Wraps CanvasRenderingContext2D\r\n* @todo Could make generic CanvasContext to accept \"type\" as a property when not '2d'\r\n*/\r\nfunction C2D2Context (arr, opts) {\r\n    if (!(this instanceof C2D2Context)) {\r\n        return new C2D2Context(arr, opts);\r\n    }\r\n\r\n    const el = this.canvas = c2d2Element(arr, opts);\r\n\r\n    this.context = this.parent = el.getContext('2d');\r\n    if (!C2D2Context.prototype.arc) {\r\n        _C2D2ContextSetup();\r\n    }\r\n    // Expose the c2d2Element properties (todo: could use Object.defineProperty to ensure stayed in sync)\r\n    this.width = el.width;\r\n    this.height = el.height;\r\n    return this; // Satisfy Netbeans\r\n};\r\n// Expose the c2d2Element methods\r\n_forEach(['transferControlToProxy', // Todo: Wrap this method's CanvasProxy return result?\r\n    'getContext', 'probablySupportsContext', 'supportsContext', 'setContext', 'toDataURL', 'toDataURLHD', 'toBlob', 'toBlobHD'], function (method) {\r\n    C2D2Context.prototype[method] = function () {\r\n        return this.canvas[method].apply(this.canvas, arguments);\r\n    };\r\n});\r\n\r\nC2D2Context.addMethods = function (methodMap) {\r\n    for (const m in methodMap) {\r\n        if (methodMap.hasOwnProperty(m)) {\r\n            const method = methodMap[m]; // Todo: Automate adding of '$' to the method?\r\n            C2D2Context.prototype[m] = buildContextMethods(method);\r\n        }\r\n    }\r\n};\r\n\r\n// Unlike addMethods, requires manually supplying 'this' at the end\r\nC2D2Context.extend = function (obj) { // Keeps constructor property in tact\r\n    for (const p in obj) {\r\n        if (obj.hasOwnProperty(p)) {\r\n            C2D2Context.prototype[p] = obj[p];\r\n        }\r\n    }\r\n};\r\n\r\n// EXTENSIONS\r\nC2D2Context.addMethods({\r\n    $line (obj, close) {\r\n        let a;\r\n        if (obj && typeof obj === 'object' && !obj.length) {\r\n            if (obj.color) {\r\n                this.$lineColor(obj.color);\r\n            }\r\n            if (obj.width || obj.w) {\r\n                this.lineWidth(obj.width || obj.w);\r\n            }\r\n            if (obj.shadow || obj.$shadow) {\r\n                this.$shadow(obj.shadow);\r\n            }\r\n            a = _arrayify.apply(null, (obj.coords || obj.xy || obj.path));\r\n        } else {\r\n            a = _arrayify.apply(null, arguments);\r\n        }\r\n        this.beginPath().moveTo.apply(this, a[0]);\r\n        for (let i = 1, argl = a.length; i < argl; i++) {\r\n            this.lineTo.apply(this, a[i]);\r\n        }\r\n        if (close || obj.close) {\r\n            this.closePath();\r\n        }\r\n        this.stroke();\r\n    },\r\n    $fill (obj) {\r\n        let a;\r\n        if (obj && typeof obj === 'object' && !obj.length) {\r\n            if (obj.color) {\r\n                this.$fillColor(obj.color);\r\n            }\r\n            if (obj.shadow || obj.$shadow) {\r\n                this.$shadow(obj.shadow);\r\n            }\r\n            a = _arrayify.apply(null, (obj.coords || obj.xy || obj.path));\r\n        } else {\r\n            a = _arrayify.apply(null, arguments);\r\n        }\r\n        if (a[0].length === 4) {\r\n            return this.$fillRect.apply(this, a);\r\n        }\r\n        this.beginPath().moveTo.apply(this, a[0]);\r\n        for (let i = 1, argl = a.length; i < argl; i++) {\r\n            this.lineTo.apply(this, a[i]);\r\n        }\r\n        this.fill();\r\n    },\r\n    $clear () {\r\n        this.$clearRect.apply(this, arguments);\r\n    },\r\n    $fillRect (x, y, w, h) {\r\n        if (x && typeof x === 'object' && x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$fillRect.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.fillRect(x || 0, y || 0, w || this.width, h || this.height);\r\n    },\r\n    $clearRect (x, y, w, h) {\r\n        if (x && typeof x === 'object' && x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$clearRect.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.clearRect(x || 0, y || 0, w || this.width, h || this.height);\r\n    },\r\n\r\n    // $rect, $clip, $arcTo\r\n\r\n    $strokeRect (x, y, w, h) {\r\n        if (x && typeof x === 'object' && x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$strokeRect.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.strokeRect(x || 0, y || 0, w || this.width, h || this.height);\r\n    },\r\n    $arc (x, y, radius, startAngle, endAngle, anticlockwise) {\r\n        if (x && typeof x === 'object' && x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$arc.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\r\n    },\r\n    $quadraticCurve () {\r\n        this.$quadratic.apply(this, arguments);\r\n    },\r\n    $quadraticCurveTo () {\r\n        this.$quadratic.apply(this, arguments);\r\n    },\r\n    $quadratic (cp1x, cp1y, x, y) {\r\n        if (cp1x && typeof cp1x === 'object' && cp1x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$quadratic.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.quadraticCurveTo(cp1x, cp1y, x, y);\r\n    },\r\n    $bezierCurve () {\r\n        this.$bezier.apply(this, arguments);\r\n    },\r\n    $bezierCurveTo () {\r\n        this.$bezier.apply(this, arguments);\r\n    },\r\n    $bezier (cp1x, cp1y, cp2x, cp2y, x, y) {\r\n        if (cp1x && typeof cp1x === 'object' && cp1x.length) {\r\n            for (let i = 0, argl = arguments.length; i < argl; i++) {\r\n                this.$bezier.apply(this, arguments[i]); // Allow array for coordinates\r\n            }\r\n            return this;\r\n        }\r\n        this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\r\n    }\r\n});\r\nC2D2Context.extend({ // Don't auto-return 'this' object for these\r\n    $shadowColor (value) {\r\n        if (value === 'random') {\r\n            value = C2D2Context.randomColor();\r\n        }\r\n        return this.shadowColor(value);\r\n    },\r\n    $fillColor (value) { // getter or setter\r\n        if (value === 'random') {\r\n            value = C2D2Context.randomColor();\r\n        }\r\n        return this.fillStyle(value);\r\n    },\r\n    $lineColor (value) { // getter or setter\r\n        if (value === 'random') {\r\n            value = C2D2Context.randomColor();\r\n        }\r\n        return this.strokeStyle(value);\r\n    },\r\n    $imageData (...args) {\r\n        if (typeof args[0] === 'object' && args[1] !== undefined) {\r\n            this.putImageData(...args);\r\n            return this;\r\n        }\r\n        if (args[2] !== undefined) {\r\n            return this.getImageData(...args); // data (length), width, height\r\n        }\r\n        return this.createImageData(...args);\r\n    },\r\n    $shadowOffset (x, y) {\r\n        if (x === undefined) {\r\n            return [this.shadowOffsetX(), this.shadowOffsetY()];\r\n        }\r\n\r\n        if (typeof x === 'object' && !y && x.length) {\r\n            y = x[1];\r\n            x = x[0];\r\n        } else if (typeof x === 'string' && x.indexOf(', ') !== -1) {\r\n            ([x, y] = x.split(/\\s*,\\s*/));\r\n        }\r\n        this.shadowOffsetX(x).shadowOffsetY(y);\r\n        return this;\r\n    },\r\n    $shadowBlur (...args) { // Just a place-holder, at least for now\r\n        this.shadowBlur(...args);\r\n    },\r\n    $shadowOffsetY (...args) { // Just a place-holder, at least for now\r\n        this.shadowOffsetY(...args);\r\n    },\r\n    $shadowOffsetX (...args) { // Just a place-holder, at least for now\r\n        this.shadowOffsetX(...args);\r\n    },\r\n    $shadow (sh) {\r\n        let att;\r\n        if (sh === undefined) { // Not super useful compared to native\r\n            return {offset: this.$shadowOffset(), blur: this.shadowBlur(), color: this.$shadowColor(),\r\n                offsetX: this.shadowOffsetX(), offsetY: this.shadowOffsetY()};\r\n        }\r\n        for (att in sh) {\r\n            if (sh.hasOwnProperty(att)) {\r\n                if (att === 'offset') { // Offer additional property to get the coords together\r\n                    this.$shadowOffset(sh[att]);\r\n                } else {\r\n                    this['$shadow' + att.charAt(0).toUpperCase() + att.slice(1)](sh[att]);\r\n                }\r\n            }\r\n        }\r\n        return this;\r\n    }\r\n});\r\n\r\nC2D2Context.randomNumber = function (min, max) {\r\n    min = min || 0;\r\n    max = max || 1;\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n};\r\n\r\n// See also the individual methods which use this (allowing \"random\" as a \"color\" argument)\r\nC2D2Context.randomColor = function (r, g, b, rmax, gmax, bmax) {\r\n    r = r || 0;\r\n    g = g || 0;\r\n    b = b || 0;\r\n    rmax = rmax || 255;\r\n    gmax = gmax || 255;\r\n    bmax = bmax || 255;\r\n    const red = C2D2Context.randomNumber(r, rmax),\r\n        green = C2D2Context.randomNumber(g, gmax),\r\n        blue = C2D2Context.randomNumber(b, bmax);\r\n    return 'rgb(' + red + ', ' + green + ', ' + blue + ')';\r\n};\r\n/**\r\nUseful for separation of concerns, detecting the CSS style rule for a given class, id, or other selector and applying it as an argument to a canvas method, so that the JavaScript does not need to be concerned with secondary styling (of course the images it generates is a kind of style)\r\n*/\r\nC2D2Context.getCSSPropertyValue = function (selectorText, propertyName, sheet) {\r\n    let ss, val,\r\n        i = 0, j = 0, dsl = 0, crl = 0;\r\n    function _getPropertyFromStyleSheet (ss, selectorText, propertyName) {\r\n        const rules = ss.cssRules || ss.rules; // Mozilla or IE\r\n        for (j = 0, crl = rules.length; j < crl; j++) {\r\n            const rule = rules[j];\r\n            try {\r\n                if (rule.type === 1 && // CSSRule.STYLE_RULE\r\n                    rule.selectorText === selectorText) {\r\n                    return rule.style.getPropertyValue(propertyName);\r\n                }\r\n            } catch (err) { // IE\r\n                if (rule.selectorText === selectorText) {\r\n                    propertyName = propertyName.replace(/-([a-z])/g, String.prototype.toUpperCase);\r\n                    return rule.style[propertyName];\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    };\r\n    if (sheet !== undefined) {\r\n        ss = document.styleSheets[sheet];\r\n        return _getPropertyFromStyleSheet(ss, selectorText, propertyName);\r\n    }\r\n    for (i = 0, dsl = document.styleSheets.length; i < dsl; i++) {\r\n        ss = document.styleSheets[i];\r\n        val = _getPropertyFromStyleSheet(ss, selectorText, propertyName);\r\n        if (val) {\r\n            break;\r\n        }\r\n    }\r\n    return val;\r\n};\r\n\r\n// Attach classes for sake of extensibility (or utilization for canvasElement)\r\nC2D2Context.CanvasPixelArray = C2D2CanvasPixelArray;\r\nC2D2Context.ImageData = C2D2ImageData;\r\nC2D2Context.Gradient = C2D2Gradient;\r\nC2D2Context.Pattern = C2D2Pattern;\r\nC2D2Context.canvasElement = c2d2Element;\r\n\r\nexport default C2D2Context;\r\n"],"names":["_forEach","arr","h","i","arrl","length","_arrayify","begin","coords","args","arguments","trim","replace","split","item","idx","w","window","global","buildMethod","m","this","parent","apply","buildGetterMethod","gm","methodFromProperty","WrapperClass","imageData","slice","call","buildLiteralGetterMethod","buildPropertyMethod","p","value","undefined","buildContextMethods","method","DelegateChain","[object Object]","methods","clss","methl","prototype","getterMethods","gmethl","props","propl","_C2D2CanvasPixelArraySetup","C2D2CanvasPixelArray","value2","addPropertyMethods","canvasPixelArrayObj","array","pixelArray","_C2D2ImageDataSetup","addGetterMethods","C2D2ImageData","imageDataObj","width","_C2D2GradientSetup","addMethods","C2D2Gradient","gradientObj","addColorStop","gradient","C2D2Pattern","patternObj","pattern","_C2D2ContextSetup","C2D2Context","c2d2Element","opts","Canvas","fs","out","stream","path","height","el","d","document","noArray","bNodeModule","fileStream","getElementById","require","createWriteStream","createPNGStream","on","chunk","write","end","nodeName","getElementsByTagName","createElementNS","documentElement","namespaceURI","createElement","setAttribute","id","style","innerHTML","className","appendTo","body","appendChild","G_vmlCanvasManager","initElement","canvas","context","getContext","arc","methodMap","hasOwnProperty","extend","obj","close","a","color","$lineColor","lineWidth","shadow","$shadow","xy","beginPath","moveTo","argl","lineTo","closePath","stroke","$fillColor","$fillRect","fill","$clearRect","x","y","fillRect","clearRect","$strokeRect","strokeRect","radius","startAngle","endAngle","anticlockwise","$arc","$quadratic","cp1x","cp1y","quadraticCurveTo","$bezier","cp2x","cp2y","bezierCurveTo","randomColor","shadowColor","fillStyle","strokeStyle","putImageData","getImageData","createImageData","shadowOffsetX","shadowOffsetY","indexOf","shadowBlur","sh","att","offset","$shadowOffset","blur","$shadowColor","offsetX","offsetY","charAt","toUpperCase","randomNumber","min","max","Math","floor","random","r","g","b","rmax","gmax","bmax","getCSSPropertyValue","selectorText","propertyName","sheet","ss","val","j","dsl","crl","_getPropertyFromStyleSheet","rules","cssRules","rule","type","getPropertyValue","err","String","styleSheets","CanvasPixelArray","ImageData","Gradient","Pattern","canvasElement"],"mappings":"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"}