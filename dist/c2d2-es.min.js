function t(t,e){for(let o=0,r=t.length;o<r;o++)e(t[o],o)}function e(e){let o=arguments;if("string"==typeof e){o=[],t(e.trim().replace(/\s*,\s+/g,", ").split(/\s+/),(t,e)=>{o[e]=t.split(", ")})}return o}const o="undefined"==typeof window?global:window;function r(t){return function(...e){return this.parent[t](...e),this}}function i(t,e,o){return function(r){const i=[].slice.call(arguments);return"putImageData"===t&&"object"==typeof r&&r.imageData&&(i[0]=r.imageData),new o(e?this.parent[t]:this.parent[t](...i))}}function s(t){return function(...e){return this.parent[t](...e)}}function a(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}const n={addMethods(t,e){for(let o=0,i=t.length;o<i;o++){const i=t[o];e.prototype[i]=r(i)}},addGetterMethods(t,e,o,r){for(let a=0,n=t.length;a<n;a++){const n=t[a];e.prototype[n]=o?i(n,r,o):s(n)}},addPropertyMethods(t,e){for(let o=0,r=t.length;o<r;o++){const r=t[o];e.prototype[r]=a(r)}}};function h(t){h.prototype.length||(h.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},n.addPropertyMethods(["length"],h)),this.parent=this.array=this.pixelArray=t}function l(t){l.prototype.width||(n.addGetterMethods(["data"],l,h,!0),n.addPropertyMethods(["width","height","resolution"],l)),this.parent=this.imageData=t}function d(t){d.prototype.addColorStop||n.addMethods(["addColorStop"],d),this.parent=this.gradient=t}function c(t){return this.parent=this.pattern=t,t}function f(t,e){let r=e;const i=o.document||null,s="object"!=typeof t||!t.length;s?(r=e=t,t=[]):e=e||{};const a=e&&(e.path||e.fileStream);let n;if("string"==typeof e)r=i.getElementById(e);else if("object"==typeof e&&a){const{createCanvas:o}=require("canvas");r=o();const i=t[0]||e.width||e.w,s=t[1]||e.height||e.h;i&&(r.width=i),s&&(r.height=s);const a=e.fileStream||e.path;if(a){const t=require("fs").createWriteStream(a),e=r.createPNGStream();e.on("data",e=>{t.write(e)}),e.on("end",()=>{t.end()})}}else"object"!=typeof e||e.nodeName?void 0===e&&(r=i.getElementsByTagName("canvas")[0]):(r=i.createElementNS&&null!==i.documentElement.namespaceURI?i.createElementNS("http://www.w3.org/1999/xhtml","canvas"):i.createElement("canvas"),(e.width||e.w)&&r.setAttribute("width",e.width||e.w),(e.height||e.h)&&r.setAttribute("height",e.height||e.h),e.id&&r.setAttribute("id",e.id),e.style&&r.setAttribute("style",e.style),e.innerHTML&&(r.innerHTML=e.innerHTML),(e.class||e.className)&&r.setAttribute("class",e.class||e.className),n=e.appendTo?"string"==typeof e.appendTo?i.getElementById(e.appendTo):e.appendTo:i.body);return!s&&r.setAttribute&&(r.setAttribute("width",t[0]),r.setAttribute("height",t[1])),n&&n.appendChild(r),o.G_vmlCanvasManager&&(r=o.G_vmlCanvasManager.initElement(r)),r}function u(t,e){if(!(this instanceof u))return new u(t,e);const o=this.canvas=f(t,e);return this.context=this.parent=o.getContext("2d"),u.prototype.arc||(n.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],u),n.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],u,l),n.addGetterMethods(["createLinearGradient","createRadialGradient"],u,d),n.addGetterMethods(["createPattern"],u,c),n.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],u),n.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],u)),this.width=o.width,this.height=o.height,this}t(["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"],function(t){u.prototype[t]=function(...e){return this.canvas[t](...e)}}),u.addMethods=function(t){Object.entries(t).forEach(([t,e])=>{u.prototype[t]=function(t){return function(...e){return t.apply(this,e),this}}(e)})},u.extend=function(t){Object.entries(t).forEach(([t,e])=>{u.prototype[t]=e})},u.addMethods({$line(t,o){let r;t&&"object"==typeof t&&!t.length?(t.color&&this.$lineColor(t.color),(t.width||t.w)&&this.lineWidth(t.width||t.w),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),r=e.apply(null,t.coords||t.xy||t.path)):r=e.apply(null,arguments),this.beginPath().moveTo.apply(this,r[0]);for(let t=1,e=r.length;t<e;t++)this.lineTo(...r[t]);(o||t.close)&&this.closePath(),this.stroke()},$fill(t){let o;if(t&&"object"==typeof t&&!t.length?(t.color&&this.$fillColor(t.color),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),o=e.apply(null,t.coords||t.xy||t.path)):o=e.apply(null,arguments),4===o[0].length)return this.$fillRect(...o);this.beginPath().moveTo.apply(this,o[0]);for(let t=1,e=o.length;t<e;t++)this.lineTo(...o[t]);this.fill()},$clear(...t){this.$clearRect(...t)},$fillRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$fillRect(...arguments[t]);return this}this.fillRect(t||0,e||0,o||this.width,r||this.height)},$clearRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$clearRect(...arguments[t]);return this}this.clearRect(t||0,e||0,o||this.width,r||this.height)},$strokeRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$strokeRect(...arguments[t]);return this}this.strokeRect(t||0,e||0,o||this.width,r||this.height)},$arc(t,e,o,r,i,s){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$arc(...arguments[t]);return this}this.arc(t,e,o,r,i,s)},$quadraticCurve(...t){this.$quadratic(...t)},$quadraticCurveTo(...t){this.$quadratic(...t)},$quadratic(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$quadratic(...arguments[t]);return this}this.quadraticCurveTo(t,e,o,r)},$bezierCurve(...t){this.$bezier(...t)},$bezierCurveTo(...t){this.$bezier(...t)},$bezier(t,e,o,r,i,s){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$bezier(...arguments[t]);return this}this.bezierCurveTo(t,e,o,r,i,s)}}),u.extend({$shadowColor(t){return"random"===t&&(t=u.randomColor()),this.shadowColor(t)},$fillColor(t){return"random"===t&&(t=u.randomColor()),this.fillStyle(t)},$lineColor(t){return"random"===t&&(t=u.randomColor()),this.strokeStyle(t)},$imageData(...t){return"object"==typeof t[0]&&void 0!==t[1]?(this.putImageData(...t),this):void 0!==t[2]?this.getImageData(...t):this.createImageData(...t)},$shadowOffset(t,e){return void 0===t?[this.shadowOffsetX(),this.shadowOffsetY()]:("object"==typeof t&&!e&&t.length?(e=t[1],t=t[0]):"string"==typeof t&&-1!==t.indexOf(", ")&&([t,e]=t.split(/\s*,\s*/)),this.shadowOffsetX(t).shadowOffsetY(e),this)},$shadowBlur(...t){this.shadowBlur(...t)},$shadowOffsetY(...t){this.shadowOffsetY(...t)},$shadowOffsetX(...t){this.shadowOffsetX(...t)},$shadow(t){return void 0===t?{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(Object.entries(t).forEach(([t,e])=>{"offset"===t?this.$shadowOffset(e):this[`$shadow${t.charAt(0).toUpperCase()+t.slice(1)}`](e)}),this)}}),u.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},u.randomColor=function(t,e,o,r,i,s){return t=t||0,e=e||0,o=o||0,r=r||255,i=i||255,s=s||255,`rgb${u.randomNumber(t,r)}, ${u.randomNumber(e,i)}, ${u.randomNumber(o,s)})`},u.getCSSPropertyValue=function(t,e,o){function r(t,e,o){const r=t.cssRules||t.rules;for(let t=0,i=r.length;t<i;t++){const i=r[t];try{if(1===i.type&&i.selectorText===e)return i.style.getPropertyValue(o)}catch(t){if(i.selectorText===e)return o=o.replace(/-([a-z])/g,String.prototype.toUpperCase),i.style[o]}}return!1}let i,s;if(void 0!==o)return r(i=document.styleSheets[o],t,e);for(let o=0,a=document.styleSheets.length;o<a&&!(s=r(i=document.styleSheets[o],t,e));o++);return s},u.CanvasPixelArray=h,u.ImageData=l,u.Gradient=d,u.Pattern=c,u.canvasElement=f;export default u;
//# sourceMappingURL=c2d2-es.min.js.map
