let t,e;"undefined"!=typeof require&&(({createCanvas:e}=require("canvas")),t=require("fs"));const o="undefined"==typeof window?global:window;function r(t){return function(...e){return this.parent[t](...e),this}}function s(t,e,o){return function(...r){const s=r[0];return"putImageData"===t&&"object"==typeof s&&s.imageData&&(r[0]=s.imageData),new o(e?this.parent[t]:this.parent[t](...r))}}function i(t){return function(...e){return this.parent[t](...e)}}function a(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}const n={addMethods(t,e){for(const o of t)e.prototype[o]=r(o)},addGetterMethods(t,e,o,r){for(const a of t)e.prototype[a]=o?s(a,r,o):i(a)},addPropertyMethods(t,e){for(const o of t)e.prototype[o]=a(o)}};function h(t){h.prototype.length||(h.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},n.addPropertyMethods(["length"],h)),this.parent=this.array=this.pixelArray=t}function c(t){c.prototype.width||(n.addGetterMethods(["data"],c,h,!0),n.addPropertyMethods(["width","height","resolution"],c)),this.parent=this.imageData=t}function d(t){d.prototype.addColorStop||n.addMethods(["addColorStop"],d),this.parent=this.gradient=t}function l(t){return this.parent=this.pattern=t,t}function f(r,s){let i=s;const a=o.document||null,n="object"!=typeof r||!r.length;n?(i=s=r,r=[]):s=s||{};const h=s&&(s.path||s.fileStream);let c;if("string"==typeof s)i=a.querySelector("#"+s);else if("object"==typeof s&&h){i=e();const o=r[0]||s.width||s.w,a=r[1]||s.height||s.h;o&&(i.width=o),a&&(i.height=a);const n=s.fileStream||s.path;if(n){const e=t.createWriteStream(n),o=i.createPNGStream();o.on("data",t=>{e.write(t)}),o.on("end",()=>{e.end()})}}else"object"!=typeof s||s.nodeName?void 0===s&&(i=a.querySelector("canvas")):(i=a.createElementNS&&null!==a.documentElement.namespaceURI?a.createElementNS("http://www.w3.org/1999/xhtml","canvas"):a.createElement("canvas"),(s.width||s.w)&&i.setAttribute("width",s.width||s.w),(s.height||s.h)&&i.setAttribute("height",s.height||s.h),s.id&&i.setAttribute("id",s.id),s.style&&i.setAttribute("style",s.style),s.innerHTML&&(i.innerHTML=s.innerHTML),(s.class||s.className)&&i.setAttribute("class",s.class||s.className),c=s.appendTo?"string"==typeof s.appendTo?a.querySelector("#"+s.appendTo):s.appendTo:a.body);return!n&&i.setAttribute&&(i.setAttribute("width",r[0]),i.setAttribute("height",r[1])),c&&c.append(i),o.G_vmlCanvasManager&&(i=o.G_vmlCanvasManager.initElement(i)),i}function u(t,e){if(!(this instanceof u))return new u(t,e);const o=this.canvas=f(t,e);return this.context=this.parent=o.getContext("2d"),u.prototype.arc||(n.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],u),n.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],u,c),n.addGetterMethods(["createLinearGradient","createRadialGradient"],u,d),n.addGetterMethods(["createPattern"],u,l),n.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],u),n.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],u)),this.width=o.width,this.height=o.height,this}function p(t,e,o){const r=t.cssRules||t.rules;for(let t=0,s=r.length;t<s;t++){const s=r[t];try{if(1===s.type&&s.selectorText===e)return s.style.getPropertyValue(o)}catch(t){if(s.selectorText===e)return o=o.replace(/-[a-z]/gu,String.prototype.toUpperCase),s.style[o]}}return!1}["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"].forEach((function(t){u.prototype[t]=function(...e){return this.canvas[t](...e)}})),u.addMethods=function(t){Object.entries(t).forEach(([t,e])=>{u.prototype[t]=function(t){return function(...e){return t.apply(this,e),this}}(e)})},u.extend=function(t){Object.entries(t).forEach(([t,e])=>{u.prototype[t]=e})},u.addMethods({$line(...t){const[e,o]=t;let r=t;e&&"object"==typeof e&&!e.length&&(e.color&&this.$lineColor(e.color),(e.width||e.w)&&this.lineWidth(e.width||e.w),(e.shadow||e.$shadow)&&this.$shadow(e.shadow),r=[...e.coords||e.xy||e.path]),this.beginPath().moveTo.apply(this,r[0]),r.slice(1).forEach(t=>{this.lineTo(...t)}),(o||e.close)&&this.closePath(),this.stroke()},$fill(...t){const[e]=t;let o=t;return e&&"object"==typeof e&&!e.length&&(e.color&&this.$fillColor(e.color),(e.shadow||e.$shadow)&&this.$shadow(e.shadow),o=[...e.coords||e.xy||e.path]),4===o[0].length?this.$fillRect(...o):(this.beginPath().moveTo.apply(this,o[0]),o.slice(1).forEach(t=>{this.lineTo(...t)}),this.fill(),this)},$clear(...t){return this.$clearRect(...t),this},$fillRect(...t){const[e,o,r,s]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$fillRect(...e);return this}return this.fillRect(e||0,o||0,r||this.width,s||this.height),this},$clearRect(...t){const[e,o,r,s]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$clearRect(...e);return this}return this.clearRect(e||0,o||0,r||this.width,s||this.height),this},$strokeRect(...t){const[e,o,r,s]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$strokeRect(...e);return this}return this.strokeRect(e||0,o||0,r||this.width,s||this.height),this},$arc(...t){const[e,o,r,s,i,a]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$arc(...e);return this}return this.arc(e,o,r,s,i,a),this},$quadraticCurve(...t){this.$quadratic(...t)},$quadraticCurveTo(...t){this.$quadratic(...t)},$quadratic(...t){const[e,o,r,s]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$quadratic(...e);return this}return this.quadraticCurveTo(e,o,r,s),this},$bezierCurve(...t){this.$bezier(...t)},$bezierCurveTo(...t){this.$bezier(...t)},$bezier(...t){const[e,o,r,s,i,a]=t;if(e&&"object"==typeof e&&e.length){for(const e of t)this.$bezier(...e);return this}return this.bezierCurveTo(e,o,r,s,i,a),this}}),u.extend({$shadowColor(t){return"random"===t&&(t=u.randomColor()),this.shadowColor(t)},$fillColor(t){return"random"===t&&(t=u.randomColor()),this.fillStyle(t)},$lineColor(t){return"random"===t&&(t=u.randomColor()),this.strokeStyle(t)},$imageData(...t){return"object"==typeof t[0]&&void 0!==t[1]?(this.putImageData(...t),this):void 0!==t[2]?this.getImageData(...t):this.createImageData(...t)},$shadowOffset(t,e){return void 0===t?[this.shadowOffsetX(),this.shadowOffsetY()]:("object"==typeof t&&!e&&t.length?(e=t[1],t=t[0]):"string"==typeof t&&t.includes(", ")&&([t,e]=t.split(/\s*,\s*/u)),this.shadowOffsetX(t).shadowOffsetY(e),this)},$shadowBlur(...t){this.shadowBlur(...t)},$shadowOffsetY(...t){this.shadowOffsetY(...t)},$shadowOffsetX(...t){this.shadowOffsetX(...t)},$shadow(t){return void 0===t?{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(Object.entries(t).forEach(([t,e])=>{"offset"===t?this.$shadowOffset(e):this[`$shadow${t.charAt(0).toUpperCase()+t.slice(1)}`](e)}),this)}}),u.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},u.randomColor=function(t,e,o,r,s,i){return t=t||0,e=e||0,o=o||0,r=r||255,s=s||255,i=i||255,`rgb${u.randomNumber(t,r)}, ${u.randomNumber(e,s)}, ${u.randomNumber(o,i)})`},u.getCSSPropertyValue=function(t,e,o){let r,s;return void 0!==o?(r=document.styleSheets[o],p(r,t,e)):([...document.styleSheets].some(o=>(s=p(o,t,e),s)),s)},u.CanvasPixelArray=h,u.ImageData=c,u.Gradient=d,u.Pattern=l,u.canvasElement=f;export default u;
//# sourceMappingURL=c2d2-es.min.js.map
