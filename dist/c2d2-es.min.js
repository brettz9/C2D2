function _forEach(t,e){for(let a=0,o=t.length;a<o;a++)e(t[a],a)}function _arrayify(t){let e,a=arguments;return"string"==typeof t&&(a=[],_forEach(e=t.trim().replace(/\s*,\s+/g,", ").split(/\s+/),(t,e)=>{a[e]=t.split(", ")})),a}const w="undefined"==typeof window?global:window;function buildMethod(t){return function(){return this.parent[t].apply(this.parent,arguments),this}}function buildGetterMethod(t,e,a){return function(o){const r=[].slice.call(arguments);return"putImageData"===t&&"object"==typeof o&&o.imageData&&(r[0]=o.imageData),new a(e?this.parent[t]:this.parent[t].apply(this.parent,r))}}function buildLiteralGetterMethod(t){return function(){return this.parent[t].apply(this.parent,arguments)}}function buildPropertyMethod(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}function buildContextMethods(t){return function(){return t.apply(this,arguments),this}}const DelegateChain={addMethods(t,e){for(let a=0,o=t.length;a<o;a++){const o=t[a];e.prototype[o]=buildMethod(o)}},addGetterMethods(t,e,a,o){for(let r=0,n=t.length;r<n;r++){const n=t[r];e.prototype[n]=a?buildGetterMethod(n,o,a):buildLiteralGetterMethod(n)}},addPropertyMethods(t,e){for(let a=0,o=t.length;a<o;a++){const o=t[a];e.prototype[o]=buildPropertyMethod(o)}}};function _C2D2CanvasPixelArraySetup(){C2D2CanvasPixelArray.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},DelegateChain.addPropertyMethods(["length"],C2D2CanvasPixelArray)}function C2D2CanvasPixelArray(t){C2D2CanvasPixelArray.prototype.length||_C2D2CanvasPixelArraySetup(),this.parent=this.array=this.pixelArray=t}function _C2D2ImageDataSetup(){DelegateChain.addGetterMethods(["data"],C2D2ImageData,C2D2CanvasPixelArray,!0),DelegateChain.addPropertyMethods(["width","height","resolution"],C2D2ImageData)}function C2D2ImageData(t){C2D2ImageData.prototype.width||_C2D2ImageDataSetup(),this.parent=this.imageData=t}function _C2D2GradientSetup(){DelegateChain.addMethods(["addColorStop"],C2D2Gradient)}function C2D2Gradient(t){C2D2Gradient.prototype.addColorStop||_C2D2GradientSetup(),this.parent=this.gradient=t}function C2D2Pattern(t){return this.parent=this.pattern=t,t}function _C2D2ContextSetup(){DelegateChain.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],C2D2Context),DelegateChain.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],C2D2Context,C2D2ImageData),DelegateChain.addGetterMethods(["createLinearGradient","createRadialGradient"],C2D2Context,C2D2Gradient),DelegateChain.addGetterMethods(["createPattern"],C2D2Context,C2D2Pattern),DelegateChain.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],C2D2Context),DelegateChain.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],C2D2Context)}function c2d2Element(t,e){let a,o,r,n,i,s,h,l,d=e;const p=w.document||null,c="object"!=typeof t||!t.length;c?(d=e=t,t=[]):e=e||{};const f=e&&(e.path||e.fileStream);return"string"==typeof e?d=p.getElementById(e):"object"==typeof e&&f?(d=new(o=require("canvas")),h=t[0]||e.width||e.w,l=t[1]||e.height||e.h,h&&(d.width=h),l&&(d.height=l),(s=e.fileStream||e.path)&&(r=require("fs"),n=r.createWriteStream(s),(i=d.createPNGStream()).on("data",t=>{n.write(t)}),i.on("end",()=>{n.end()}))):"object"!=typeof e||e.nodeName?void 0===e&&(d=p.getElementsByTagName("canvas")[0]):(d=p.createElementNS&&null!==p.documentElement.namespaceURI?p.createElementNS("http://www.w3.org/1999/xhtml","canvas"):p.createElement("canvas"),(e.width||e.w)&&d.setAttribute("width",e.width||e.w),(e.height||e.h)&&d.setAttribute("height",e.height||e.h),e.id&&d.setAttribute("id",e.id),e.style&&d.setAttribute("style",e.style),e.innerHTML&&(d.innerHTML=e.innerHTML),(e.class||e.className)&&d.setAttribute("class",e.class||e.className),a=e.appendTo?"string"==typeof e.appendTo?p.getElementById(e.appendTo):e.appendTo:p.body),!c&&d.setAttribute&&(d.setAttribute("width",t[0]),d.setAttribute("height",t[1])),a&&a.appendChild(d),w.G_vmlCanvasManager&&(d=w.G_vmlCanvasManager.initElement(d)),d}function C2D2Context(t,e){if(!(this instanceof C2D2Context))return new C2D2Context(t,e);const a=this.canvas=c2d2Element(t,e);return this.context=this.parent=a.getContext("2d"),C2D2Context.prototype.arc||_C2D2ContextSetup(),this.width=a.width,this.height=a.height,this}_forEach(["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"],function(t){C2D2Context.prototype[t]=function(){return this.canvas[t].apply(this.canvas,arguments)}}),C2D2Context.addMethods=function(t){for(const e in t)if(t.hasOwnProperty(e)){const a=t[e];C2D2Context.prototype[e]=buildContextMethods(a)}},C2D2Context.extend=function(t){for(const e in t)t.hasOwnProperty(e)&&(C2D2Context.prototype[e]=t[e])},C2D2Context.addMethods({$line(t,e){let a;t&&"object"==typeof t&&!t.length?(t.color&&this.$lineColor(t.color),(t.width||t.w)&&this.lineWidth(t.width||t.w),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),a=_arrayify.apply(null,t.coords||t.xy||t.path)):a=_arrayify.apply(null,arguments),this.beginPath().moveTo.apply(this,a[0]);for(let t=1,e=a.length;t<e;t++)this.lineTo.apply(this,a[t]);(e||t.close)&&this.closePath(),this.stroke()},$fill(t){let e;if(t&&"object"==typeof t&&!t.length?(t.color&&this.$fillColor(t.color),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),e=_arrayify.apply(null,t.coords||t.xy||t.path)):e=_arrayify.apply(null,arguments),4===e[0].length)return this.$fillRect.apply(this,e);this.beginPath().moveTo.apply(this,e[0]);for(let t=1,a=e.length;t<a;t++)this.lineTo.apply(this,e[t]);this.fill()},$clear(){this.$clearRect.apply(this,arguments)},$fillRect(t,e,a,o){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$fillRect.apply(this,arguments[t]);return this}this.fillRect(t||0,e||0,a||this.width,o||this.height)},$clearRect(t,e,a,o){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$clearRect.apply(this,arguments[t]);return this}this.clearRect(t||0,e||0,a||this.width,o||this.height)},$strokeRect(t,e,a,o){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$strokeRect.apply(this,arguments[t]);return this}this.strokeRect(t||0,e||0,a||this.width,o||this.height)},$arc(t,e,a,o,r,n){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$arc.apply(this,arguments[t]);return this}this.arc(t,e,a,o,r,n)},$quadraticCurve(){this.$quadratic.apply(this,arguments)},$quadraticCurveTo(){this.$quadratic.apply(this,arguments)},$quadratic(t,e,a,o){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$quadratic.apply(this,arguments[t]);return this}this.quadraticCurveTo(t,e,a,o)},$bezierCurve(){this.$bezier.apply(this,arguments)},$bezierCurveTo(){this.$bezier.apply(this,arguments)},$bezier(t,e,a,o,r,n){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$bezier.apply(this,arguments[t]);return this}this.bezierCurveTo(t,e,a,o,r,n)}}),C2D2Context.extend({$shadowColor(t){return"random"===t&&(t=C2D2Context.randomColor()),this.shadowColor(t)},$fillColor(t){return"random"===t&&(t=C2D2Context.randomColor()),this.fillStyle(t)},$lineColor(t){return"random"===t&&(t=C2D2Context.randomColor()),this.strokeStyle(t)},$imageData(...t){return"object"==typeof t[0]&&void 0!==t[1]?(this.putImageData(...t),this):void 0!==t[2]?this.getImageData(...t):this.createImageData(...t)},$shadowOffset(t,e){return void 0===t?[this.shadowOffsetX(),this.shadowOffsetY()]:("object"==typeof t&&!e&&t.length?(e=t[1],t=t[0]):"string"==typeof t&&-1!==t.indexOf(", ")&&([t,e]=t.split(/\s*,\s*/)),this.shadowOffsetX(t).shadowOffsetY(e),this)},$shadowBlur(...t){this.shadowBlur(...t)},$shadowOffsetY(...t){this.shadowOffsetY(...t)},$shadowOffsetX(...t){this.shadowOffsetX(...t)},$shadow(t){let e;if(void 0===t)return{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()};for(e in t)t.hasOwnProperty(e)&&("offset"===e?this.$shadowOffset(t[e]):this["$shadow"+e.charAt(0).toUpperCase()+e.slice(1)](t[e]));return this}}),C2D2Context.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},C2D2Context.randomColor=function(t,e,a,o,r,n){return t=t||0,e=e||0,a=a||0,o=o||255,r=r||255,n=n||255,"rgb("+C2D2Context.randomNumber(t,o)+", "+C2D2Context.randomNumber(e,r)+", "+C2D2Context.randomNumber(a,n)+")"},C2D2Context.getCSSPropertyValue=function(t,e,a){let o,r,n=0,i=0,s=0,h=0;function l(t,e,a){const o=t.cssRules||t.rules;for(i=0,h=o.length;i<h;i++){const t=o[i];try{if(1===t.type&&t.selectorText===e)return t.style.getPropertyValue(a)}catch(o){if(t.selectorText===e)return a=a.replace(/-([a-z])/g,String.prototype.toUpperCase),t.style[a]}}return!1}if(void 0!==a)return l(o=document.styleSheets[a],t,e);for(n=0,s=document.styleSheets.length;n<s&&!(r=l(o=document.styleSheets[n],t,e));n++);return r},C2D2Context.CanvasPixelArray=C2D2CanvasPixelArray,C2D2Context.ImageData=C2D2ImageData,C2D2Context.Gradient=C2D2Gradient,C2D2Context.Pattern=C2D2Pattern,C2D2Context.canvasElement=c2d2Element;export default C2D2Context;
//# sourceMappingURL=c2d2-es.min.js.map
