{"version":3,"file":"c2d2.min.js","sources":["../src/c2d2.js"],"sourcesContent":["/* globals require */\n/**\n* @todo Resume ensuring properties/methods are added and any todos noted\n* for potential to accept specific arguments as wrapped objects or\n* return wrapped items: {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dfnReturnLink-0}\n* @todo Add tests, including for browser and Node\n*/\n\nlet fs, createCanvas;\nif (typeof require !== 'undefined') {\n  /* eslint-disable global-require */\n  ({createCanvas} = require('canvas'));\n  fs = require('fs');\n  /* eslint-enable global-require */\n}\n\n// Adds NodeJS support, and exports interface to modules\n//   that require this module\n// This should not be needed by Node\nconst win = typeof window === 'undefined' ? global : window;\n\nfunction buildMethod (m) {\n  return function (...args) {\n    this.parent[m](...args);\n    return this;\n  };\n}\nfunction buildGetterMethod (gm, methodFromProperty, WrapperClass) {\n  return function (...args) {\n    const imageData = args[0];\n    if (\n      gm === 'putImageData' && typeof imageData === 'object' &&\n            imageData.imageData\n    ) { // Todo: Hackish check for taking regular ImageData object\n      args[0] = imageData.imageData;\n    }\n    if (methodFromProperty) {\n      return new WrapperClass(this.parent[gm]);\n    }\n    return new WrapperClass(this.parent[gm](...args));\n  };\n}\nfunction buildLiteralGetterMethod (gm) {\n  return function (...args) {\n    return this.parent[gm](...args);\n  };\n}\nfunction buildPropertyMethod (p) {\n  return function (value) {\n    if (value === undefined) {\n      return this.parent[p];\n    }\n    this.parent[p] = value;\n    return this;\n  };\n}\nfunction buildContextMethods (method) {\n  return function (...args) {\n    method.apply(this, args);\n    return this;\n  };\n}\n// Todo: Wrap up any specific methods or properties which might be\n//   used on the opaque pattern and gradient child objects, if ever\n//   exposed, so that these can be properly wrapped and made chainable.\nconst DelegateChain = {\n  addMethods (methods, clss) {\n    for (const method of methods) {\n      clss.prototype[method] = buildMethod(method);\n    }\n  },\n  addGetterMethods (getterMethods, clss, WrapperClass, methodFromProperty) {\n    for (const getterMethod of getterMethods) {\n      if (WrapperClass) {\n        clss.prototype[getterMethod] = buildGetterMethod(\n          getterMethod, methodFromProperty, WrapperClass\n        );\n      } else { // For those which return a literal\n        clss.prototype[getterMethod] = buildLiteralGetterMethod(\n          getterMethod\n        );\n      }\n    }\n  },\n  addPropertyMethods (props, clss) {\n    for (const prop of props) {\n      clss.prototype[prop] = buildPropertyMethod(prop);\n    }\n  }\n};\n\nfunction _C2D2CanvasPixelArraySetup () {\n  const props = ['length']; // We'll just use this commonly used accessor name\n  C2D2CanvasPixelArray.prototype.item = function (value, value2) {\n    if (value2 === undefined) {\n      return this.parent[value];\n    }\n    this.parent[value] = value2;\n    return this;\n  };\n  //  even though not part of standard interface (not specified)\n  DelegateChain.addPropertyMethods(props, C2D2CanvasPixelArray);\n}\n\nfunction C2D2CanvasPixelArray (canvasPixelArrayObj) {\n  if (!C2D2CanvasPixelArray.prototype.length) {\n    _C2D2CanvasPixelArraySetup();\n  }\n  this.parent = this.array = this.pixelArray = canvasPixelArrayObj;\n}\n\nfunction _C2D2ImageDataSetup () {\n  const props = [\n      'width', 'height', 'resolution' // Todo: The latter is read-only\n    ],\n    getterMethods = ['data'];\n  DelegateChain.addGetterMethods(\n    getterMethods, C2D2ImageData, C2D2CanvasPixelArray, true\n  );\n  DelegateChain.addPropertyMethods(props, C2D2ImageData);\n}\n\nfunction C2D2ImageData (imageDataObj) {\n  if (!C2D2ImageData.prototype.width) {\n    _C2D2ImageDataSetup();\n  }\n  this.parent = this.imageData = imageDataObj;\n}\n\nfunction _C2D2GradientSetup () {\n  const methods = ['addColorStop'];\n  DelegateChain.addMethods(methods, C2D2Gradient);\n}\n\n// Partly opaque\nfunction C2D2Gradient (gradientObj) {\n  if (!C2D2Gradient.prototype.addColorStop) {\n    _C2D2GradientSetup();\n  }\n  this.parent = this.gradient = gradientObj;\n}\n\n// function _C2D2PatternSetup () {\n//      Fully opaque\n// }\n\n// Fully opaque\n// If never any benefits to wrapping (with chainable new methods),\n//  just avoid making this child class\nfunction C2D2Pattern (patternObj) {\n  // if (!C2D2Pattern.prototype.width) { // no known properties/methods\n  //    _C2D2PatternSetup();\n  // }\n  this.parent = this.pattern = patternObj;\n  // Just return the object for now, as appears there will be no need to wrap\n  return patternObj;\n}\n\nfunction _C2D2ContextSetup () {\n  // Predefined methods\n  const methods = [\n    'addHitRegion', 'arc', 'arcTo', 'beginPath',\n    'bezierCurveTo', 'clearRect',\n    'clip', 'closePath', 'commit', 'drawImage', 'drawSystemFocusRing',\n    'ellipse', 'fill', 'fillRect', 'fillText', 'getLineDash',\n    'lineTo', 'moveTo', 'quadraticCurveTo', 'rect', 'removeHitRegion',\n    'resetClip', 'resetTransform',\n    'restore', 'rotate', 'save', 'scale', 'scrollPathIntoView',\n    'setLineDash', 'setTransform',\n    'stroke', 'strokeRect', 'strokeText', 'transform', 'translate'\n  ]; // drawFocusRing not currently supported\n    // Todo: Implement these to be wrapped so can get and set data in\n    //   their own child chains\n    // Todo: `createPattern` is a wholly opaque object, so might need to\n    //    have child wrappers if implementing any known methods in the future\n  const imageDataGetterMethods = [\n    'createImageData', 'createImageDataHD', 'getImageData',\n    'getImageDataHD', 'putImageData', 'putImageDataHD'\n  ];\n  const gradientGetterMethods = [\n    'createLinearGradient', 'createRadialGradient'\n  ];\n    // Todo: createPattern to accept wrapped canvas element or context?\n  const patternGetterMethods = ['createPattern'];\n  // Do not return 'this' object since purpose is to get (and the\n  //  objects they create don't have more than one method to make it\n  //  desirable to chain, except for ImageData ones, moved to\n  //  `childGetterMethods`\n  const getterMethods = [\n    'drawCustomFocusRing', 'isPointInPath',\n    'isPointInStroke', 'measureText'\n  ]; // wrap `TextMetrics` of `measureText`?\n    // Predefined properties\n\n  // Todo: `fillStyle` and `strokeStyle` to return or be settable with\n  //  wrapped `CanvasGradient` or `CanvasPattern`, `currentTransform` with\n  //  wrapped `SVGMatrix`?\n  const props = [\n    'canvas', 'currentTransform', 'direction', 'fillStyle', 'font',\n    'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled',\n    'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit',\n    'shadowOffsetX', 'shadowOffsetY', 'shadowBlur', 'shadowColor',\n    'strokeStyle', 'textAlign', 'textBaseline'\n  ];\n\n  DelegateChain.addMethods(methods, C2D2Context);\n\n  DelegateChain.addGetterMethods(\n    imageDataGetterMethods, C2D2Context, C2D2ImageData\n  );\n  DelegateChain.addGetterMethods(\n    gradientGetterMethods, C2D2Context, C2D2Gradient\n  );\n  DelegateChain.addGetterMethods(\n    patternGetterMethods, C2D2Context, C2D2Pattern\n  );\n\n  DelegateChain.addGetterMethods(getterMethods, C2D2Context);\n\n  DelegateChain.addPropertyMethods(props, C2D2Context);\n}\n\nfunction c2d2Element (arr, opts) {\n  let el = opts;\n  const d = win.document || null;\n  const noArray = typeof arr !== 'object' || !arr.length;\n\n  if (noArray) {\n    el = opts = arr;\n    arr = [];\n  } else {\n    opts = opts || {};\n  }\n  const bNodeModule = opts && (opts.path || opts.fileStream);\n\n  let parent;\n  // Todo: deal with string w/h coords, number w/h coords\n  if (typeof opts === 'string') {\n    el = d.querySelector('#' + opts);\n  } else if (typeof opts === 'object' && bNodeModule) {\n    el = createCanvas();\n    const width = arr[0] || opts.width || opts.w;\n    const height = arr[1] || opts.height || opts.h;\n    if (width) {\n      el.width = width;\n    }\n    if (height) {\n      el.height = height;\n    }\n    const path = opts.fileStream || opts.path;\n    if (path) {\n      const out = fs.createWriteStream(path);\n      const stream = el.createPNGStream();\n      stream.on('data', (chunk) => {\n        out.write(chunk);\n      });\n      stream.on('end', () => {\n        out.end();\n      });\n    }\n  } else if (typeof opts === 'object' && !opts.nodeName) {\n    el = (d.createElementNS && d.documentElement.namespaceURI !== null)\n      ? d.createElementNS('http://www.w3.org/1999/xhtml', 'canvas')\n      : d.createElement('canvas');\n    if (opts.width || opts.w) {\n      el.setAttribute('width', opts.width || opts.w);\n    }\n    if (opts.height || opts.h) {\n      el.setAttribute('height', opts.height || opts.h);\n    }\n    if (opts.id) {\n      el.setAttribute('id', opts.id);\n    }\n    if (opts.style) { // Better to use a class instead\n      el.setAttribute('style', opts.style);\n    }\n    if (opts.innerHTML) { // For fallback display\n      el.innerHTML = opts.innerHTML;\n    }\n    if (opts.class || opts.className) {\n      el.setAttribute('class', opts.class || opts.className);\n    }\n    parent = opts.appendTo\n      ? typeof opts.appendTo === 'string'\n        ? d.querySelector('#' + opts.appendTo)\n        : opts.appendTo\n      : d.body;\n  } else if (opts === undefined) {\n    el = d.querySelector('canvas');\n  }\n\n  if (!noArray && el.setAttribute) {\n    el.setAttribute('width', arr[0]);\n    el.setAttribute('height', arr[1]);\n  }\n  if (parent) {\n    parent.append(el);\n  }\n\n  if (win.G_vmlCanvasManager) { // If using ExplorerCanvas to get IE support: http://code.google.com/p/explorercanvas/\n    el = win.G_vmlCanvasManager.initElement(el);\n  }\n  return el;\n}\n\n/**\n* @typedef {PlainObject} WidthHeight\n* @property {Float} 0\n* @property {Float} 1\n*/\n\n/**\n* Wraps `CanvasRenderingContext2D`.\n* @class\n* @todo Could make generic CanvasContext to accept \"type\" as a\n*  property when not '2d'\n* @param {WidthHeight} arr\n* @param {PlainObject} opts\n*/\nfunction C2D2Context (arr, opts) {\n  // eslint-disable-next-line no-restricted-syntax\n  if (!(this instanceof C2D2Context)) {\n    return new C2D2Context(arr, opts);\n  }\n\n  const el = this.canvas = c2d2Element(arr, opts);\n\n  this.context = this.parent = el.getContext('2d');\n  if (!C2D2Context.prototype.arc) {\n    _C2D2ContextSetup();\n  }\n  // Expose the c2d2Element properties (todo: could use\n  //  `Object.defineProperty` to ensure stayed in sync)\n  this.width = el.width;\n  this.height = el.height;\n  return this; // Satisfy Netbeans\n}\n\n// Expose the c2d2Element methods\n// Todo: Wrap this method's CanvasProxy return result?\n[\n  'transferControlToProxy',\n  'getContext', 'probablySupportsContext', 'supportsContext', 'setContext',\n  'toDataURL', 'toDataURLHD', 'toBlob', 'toBlobHD'\n].forEach(function (method) {\n  C2D2Context.prototype[method] = function (...args) {\n    return this.canvas[method](...args);\n  };\n});\n\nC2D2Context.addMethods = function (methodMap) {\n  Object.entries(methodMap).forEach(([methodName, method]) => {\n    C2D2Context.prototype[methodName] = buildContextMethods(method);\n  });\n};\n\n// Unlike addMethods, requires manually supplying 'this' at the end\nC2D2Context.extend = function (obj) { // Keeps constructor property in tact\n  Object.entries(obj).forEach(([propertyName, propertyValue]) => {\n    C2D2Context.prototype[propertyName] = propertyValue;\n  });\n};\n\n// EXTENSIONS\nC2D2Context.addMethods({\n  $line (...args) {\n    const [obj, close] = args;\n    let a = args;\n    if (obj && typeof obj === 'object' && !obj.length) {\n      if (obj.color) {\n        this.$lineColor(obj.color);\n      }\n      if (obj.width || obj.w) {\n        this.lineWidth(obj.width || obj.w);\n      }\n      if (obj.shadow || obj.$shadow) {\n        this.$shadow(obj.shadow);\n      }\n      a = [...(obj.coords || obj.xy || obj.path)];\n    }\n    this.beginPath().moveTo.apply(this, a[0]);\n    a.slice(1).forEach((aItem) => {\n      this.lineTo(...aItem);\n    });\n    if (close || obj.close) {\n      this.closePath();\n    }\n    this.stroke();\n  },\n  $fill (...args) {\n    const [obj] = args;\n    let a = args;\n    if (obj && typeof obj === 'object' && !obj.length) {\n      if (obj.color) {\n        this.$fillColor(obj.color);\n      }\n      if (obj.shadow || obj.$shadow) {\n        this.$shadow(obj.shadow);\n      }\n      a = [...(obj.coords || obj.xy || obj.path)];\n    }\n    if (a[0].length === 4) {\n      return this.$fillRect(...a);\n    }\n    this.beginPath().moveTo.apply(this, a[0]);\n    a.slice(1).forEach((aItem) => {\n      this.lineTo(...aItem);\n    });\n    this.fill();\n    return this;\n  },\n  $clear (...args) {\n    this.$clearRect(...args);\n    return this;\n  },\n  $fillRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$fillRect(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.fillRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n  $clearRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$clearRect(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.clearRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n\n  // $rect, $clip, $arcTo\n\n  $strokeRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        // Allow array for coordinates\n        this.$strokeRect(...arg);\n      }\n      return this;\n    }\n    this.strokeRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n  $arc (...args) {\n    const [x, y, radius, startAngle, endAngle, anticlockwise] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$arc(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n    return this;\n  },\n  $quadraticCurve (...args) {\n    this.$quadratic(...args);\n  },\n  $quadraticCurveTo (...args) {\n    this.$quadratic(...args);\n  },\n  $quadratic (...args) {\n    const [cp1x, cp1y, x, y] = args;\n    if (cp1x && typeof cp1x === 'object' && cp1x.length) {\n      for (const arg of args) {\n        this.$quadratic(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.quadraticCurveTo(cp1x, cp1y, x, y);\n    return this;\n  },\n  $bezierCurve (...args) {\n    this.$bezier(...args);\n  },\n  $bezierCurveTo (...args) {\n    this.$bezier(...args);\n  },\n  $bezier (...args) {\n    const [cp1x, cp1y, cp2x, cp2y, x, y] = args;\n    if (cp1x && typeof cp1x === 'object' && cp1x.length) {\n      for (const arg of args) {\n        this.$bezier(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    return this;\n  }\n});\nC2D2Context.extend({ // Don't auto-return 'this' object for these\n  $shadowColor (value) {\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.shadowColor(value);\n  },\n  $fillColor (value) { // getter or setter\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.fillStyle(value);\n  },\n  $lineColor (value) { // getter or setter\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.strokeStyle(value);\n  },\n  $imageData (...args) {\n    if (typeof args[0] === 'object' && args[1] !== undefined) {\n      this.putImageData(...args);\n      return this;\n    }\n    if (args[2] !== undefined) {\n      return this.getImageData(...args); // data (length), width, height\n    }\n    return this.createImageData(...args);\n  },\n  $shadowOffset (x, y) {\n    if (x === undefined) {\n      return [this.shadowOffsetX(), this.shadowOffsetY()];\n    }\n\n    if (typeof x === 'object' && !y && x.length) {\n      y = x[1];\n      x = x[0];\n    } else if (typeof x === 'string' && x.includes(', ')) {\n      ([x, y] = x.split(/\\s*,\\s*/u));\n    }\n    this.shadowOffsetX(x).shadowOffsetY(y);\n    return this;\n  },\n  $shadowBlur (...args) { // Just a place-holder, at least for now\n    this.shadowBlur(...args);\n  },\n  $shadowOffsetY (...args) { // Just a place-holder, at least for now\n    this.shadowOffsetY(...args);\n  },\n  $shadowOffsetX (...args) { // Just a place-holder, at least for now\n    this.shadowOffsetX(...args);\n  },\n  $shadow (sh) {\n    if (sh === undefined) { // Not super useful compared to native\n      return {\n        offset: this.$shadowOffset(), blur: this.shadowBlur(),\n        color: this.$shadowColor(),\n        offsetX: this.shadowOffsetX(), offsetY: this.shadowOffsetY()\n      };\n    }\n    Object.entries(sh).forEach(([att, shadowOffset]) => {\n      // Offer additional property to get the coords together\n      if (att === 'offset') {\n        this.$shadowOffset(shadowOffset);\n      } else {\n        this[\n          `$shadow${att.charAt(0).toUpperCase() + att.slice(1)}`\n        ](shadowOffset);\n      }\n    });\n    return this;\n  }\n});\n\nC2D2Context.randomNumber = function (min, max) {\n  min = min || 0;\n  max = max || 1;\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n// See also the individual methods which use this (allowing\n//  \"random\" as a \"color\" argument)\nC2D2Context.randomColor = function (r, g, b, rmax, gmax, bmax) {\n  r = r || 0;\n  g = g || 0;\n  b = b || 0;\n  rmax = rmax || 255;\n  gmax = gmax || 255;\n  bmax = bmax || 255;\n  const red = C2D2Context.randomNumber(r, rmax),\n    green = C2D2Context.randomNumber(g, gmax),\n    blue = C2D2Context.randomNumber(b, bmax);\n  return `rgb${red}, ${green}, ${blue})`;\n};\n\nfunction _getPropertyFromStyleSheet (ss, selectorText, propertyName) {\n  const rules = ss.cssRules || ss.rules; // Mozilla or IE\n  for (let j = 0, crl = rules.length; j < crl; j++) {\n    const rule = rules[j];\n    try {\n      if (rule.type === 1 && // CSSRule.STYLE_RULE\n                rule.selectorText === selectorText) {\n        return rule.style.getPropertyValue(propertyName);\n      }\n    } catch (err) { // IE\n      if (rule.selectorText === selectorText) {\n        propertyName = propertyName.replace(/-[a-z]/gu, String.prototype.toUpperCase);\n        return rule.style[propertyName];\n      }\n    }\n  }\n  return false;\n}\n\n/**\n* Useful for separation of concerns, detecting the CSS style rule for a\n* given class, id, or other selector and applying it as an argument to\n* a canvas method, so that the JavaScript does not need to be concerned\n* with secondary styling (of course the images it generates is a kind\n* of style).\n* @param {string} selectorText\n* @param {string} propertyName\n* @param {CSSStyleSheet} sheet\n* @returns {string}\n*/\nC2D2Context.getCSSPropertyValue = function (selectorText, propertyName, sheet) {\n  let ss, val;\n  if (sheet !== undefined) {\n    ss = document.styleSheets[sheet];\n    return _getPropertyFromStyleSheet(ss, selectorText, propertyName);\n  }\n  [...document.styleSheets].some((styleSheet) => {\n    val = _getPropertyFromStyleSheet(\n      styleSheet, selectorText, propertyName\n    );\n    return val;\n  });\n  return val;\n};\n\n// Attach classes for sake of extensibility (or utilization for canvasElement)\nC2D2Context.CanvasPixelArray = C2D2CanvasPixelArray;\nC2D2Context.ImageData = C2D2ImageData;\nC2D2Context.Gradient = C2D2Gradient;\nC2D2Context.Pattern = C2D2Pattern;\nC2D2Context.canvasElement = c2d2Element;\n\nexport default C2D2Context;\n"],"names":["fs","createCanvas","require","win","window","global","buildMethod","m","parent","this","buildGetterMethod","gm","methodFromProperty","WrapperClass","args","imageData","_typeof","buildLiteralGetterMethod","buildPropertyMethod","p","value","undefined","DelegateChain","addMethods","methods","clss","method","prototype","addGetterMethods","getterMethods","getterMethod","addPropertyMethods","props","prop","C2D2CanvasPixelArray","canvasPixelArrayObj","length","item","value2","array","pixelArray","C2D2ImageData","imageDataObj","width","C2D2Gradient","gradientObj","addColorStop","gradient","C2D2Pattern","patternObj","pattern","c2d2Element","arr","opts","el","d","document","noArray","bNodeModule","path","fileStream","querySelector","w","height","h","out","createWriteStream","stream","createPNGStream","on","chunk","write","end","nodeName","createElementNS","documentElement","namespaceURI","createElement","setAttribute","id","style","innerHTML","className","appendTo","body","append","G_vmlCanvasManager","initElement","C2D2Context","canvas","context","getContext","arc","_getPropertyFromStyleSheet","ss","selectorText","propertyName","rules","cssRules","j","crl","rule","type","getPropertyValue","err","replace","String","toUpperCase","forEach","methodMap","Object","entries","methodName","apply","buildContextMethods","extend","obj","propertyValue","$line","close","a","color","$lineColor","lineWidth","shadow","$shadow","coords","xy","beginPath","moveTo","slice","aItem","_this","lineTo","closePath","stroke","$fill","$fillColor","$fillRect","_this2","fill","$clear","$clearRect","x","y","arg","fillRect","clearRect","$strokeRect","strokeRect","$arc","radius","startAngle","endAngle","anticlockwise","$quadraticCurve","$quadratic","$quadraticCurveTo","cp1x","cp1y","quadraticCurveTo","$bezierCurve","$bezier","$bezierCurveTo","cp2x","cp2y","bezierCurveTo","$shadowColor","randomColor","shadowColor","fillStyle","strokeStyle","$imageData","putImageData","getImageData","createImageData","$shadowOffset","shadowOffsetX","shadowOffsetY","includes","split","$shadowBlur","shadowBlur","$shadowOffsetY","$shadowOffsetX","sh","offset","blur","offsetX","offsetY","att","shadowOffset","_this3","charAt","randomNumber","min","max","Math","floor","random","r","g","b","rmax","gmax","bmax","red","green","blue","getCSSPropertyValue","sheet","val","styleSheets","some","styleSheet","CanvasPixelArray","ImageData","Gradient","Pattern","canvasElement"],"mappings":"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"}