{"version":3,"file":"c2d2.min.js","sources":["../src/c2d2.js"],"sourcesContent":["/* globals require -- Polyglot file for now */\n/**\n* @todo Resume ensuring properties/methods are added and any todos noted\n* for potential to accept specific arguments as wrapped objects or\n* return wrapped items: {@link http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#dfnReturnLink-0}\n* @todo Add tests, including for browser and Node\n*/\n\nlet fs, createCanvas;\nif (typeof require !== 'undefined') {\n  /* eslint-disable node/global-require -- Polyglot file for now */\n  ({createCanvas} = require('canvas'));\n  fs = require('fs');\n  /* eslint-enable node/global-require -- Polyglot file for now */\n}\n\n// Adds NodeJS support, and exports interface to modules\n//   that require this module\n// This should not be needed by Node\nconst win = typeof window === 'undefined' ? global : window;\n\nfunction buildMethod (m) {\n  return function (...args) {\n    this.parent[m](...args);\n    return this;\n  };\n}\nfunction buildGetterMethod (gm, methodFromProperty, WrapperClass) {\n  return function (...args) {\n    const imageData = args[0];\n    if (\n      gm === 'putImageData' && typeof imageData === 'object' &&\n            imageData.imageData\n    ) { // Todo: Hackish check for taking regular ImageData object\n      args[0] = imageData.imageData;\n    }\n    if (methodFromProperty) {\n      return new WrapperClass(this.parent[gm]);\n    }\n    return new WrapperClass(this.parent[gm](...args));\n  };\n}\nfunction buildLiteralGetterMethod (gm) {\n  return function (...args) {\n    return this.parent[gm](...args);\n  };\n}\nfunction buildPropertyMethod (p) {\n  return function (value) {\n    if (value === undefined) {\n      return this.parent[p];\n    }\n    this.parent[p] = value;\n    return this;\n  };\n}\nfunction buildContextMethods (method) {\n  return function (...args) {\n    method.apply(this, args);\n    return this;\n  };\n}\n// Todo: Wrap up any specific methods or properties which might be\n//   used on the opaque pattern and gradient child objects, if ever\n//   exposed, so that these can be properly wrapped and made chainable.\nconst DelegateChain = {\n  addMethods (methods, clss) {\n    for (const method of methods) {\n      clss.prototype[method] = buildMethod(method);\n    }\n  },\n  addGetterMethods (getterMethods, clss, WrapperClass, methodFromProperty) {\n    for (const getterMethod of getterMethods) {\n      if (WrapperClass) {\n        clss.prototype[getterMethod] = buildGetterMethod(\n          getterMethod, methodFromProperty, WrapperClass\n        );\n      } else { // For those which return a literal\n        clss.prototype[getterMethod] = buildLiteralGetterMethod(\n          getterMethod\n        );\n      }\n    }\n  },\n  addPropertyMethods (props, clss) {\n    for (const prop of props) {\n      clss.prototype[prop] = buildPropertyMethod(prop);\n    }\n  }\n};\n\nfunction _C2D2CanvasPixelArraySetup () {\n  const props = ['length']; // We'll just use this commonly used accessor name\n  C2D2CanvasPixelArray.prototype.item = function (value, value2) {\n    if (value2 === undefined) {\n      return this.parent[value];\n    }\n    this.parent[value] = value2;\n    return this;\n  };\n  //  even though not part of standard interface (not specified)\n  DelegateChain.addPropertyMethods(props, C2D2CanvasPixelArray);\n}\n\nfunction C2D2CanvasPixelArray (canvasPixelArrayObj) {\n  if (!C2D2CanvasPixelArray.prototype.length) {\n    _C2D2CanvasPixelArraySetup();\n  }\n  this.parent = this.array = this.pixelArray = canvasPixelArrayObj;\n}\n\nfunction _C2D2ImageDataSetup () {\n  const props = [\n      'width', 'height', 'resolution' // Todo: The latter is read-only\n    ],\n    getterMethods = ['data'];\n  DelegateChain.addGetterMethods(\n    getterMethods, C2D2ImageData, C2D2CanvasPixelArray, true\n  );\n  DelegateChain.addPropertyMethods(props, C2D2ImageData);\n}\n\nfunction C2D2ImageData (imageDataObj) {\n  if (!C2D2ImageData.prototype.width) {\n    _C2D2ImageDataSetup();\n  }\n  this.parent = this.imageData = imageDataObj;\n}\n\nfunction _C2D2GradientSetup () {\n  const methods = ['addColorStop'];\n  DelegateChain.addMethods(methods, C2D2Gradient);\n}\n\n// Partly opaque\nfunction C2D2Gradient (gradientObj) {\n  if (!C2D2Gradient.prototype.addColorStop) {\n    _C2D2GradientSetup();\n  }\n  this.parent = this.gradient = gradientObj;\n}\n\n// function _C2D2PatternSetup () {\n//      Fully opaque\n// }\n\n// Fully opaque\n// If never any benefits to wrapping (with chainable new methods),\n//  just avoid making this child class\nfunction C2D2Pattern (patternObj) {\n  // if (!C2D2Pattern.prototype.width) { // no known properties/methods\n  //    _C2D2PatternSetup();\n  // }\n  this.parent = this.pattern = patternObj;\n  // Just return the object for now, as appears there will be no need to wrap\n  return patternObj;\n}\n\nfunction _C2D2ContextSetup () {\n  // Predefined methods\n  const methods = [\n    'addHitRegion', 'arc', 'arcTo', 'beginPath',\n    'bezierCurveTo', 'clearRect',\n    'clip', 'closePath', 'commit', 'drawImage', 'drawSystemFocusRing',\n    'ellipse', 'fill', 'fillRect', 'fillText', 'getLineDash',\n    'lineTo', 'moveTo', 'quadraticCurveTo', 'rect', 'removeHitRegion',\n    'resetClip', 'resetTransform',\n    'restore', 'rotate', 'save', 'scale', 'scrollPathIntoView',\n    'setLineDash', 'setTransform',\n    'stroke', 'strokeRect', 'strokeText', 'transform', 'translate'\n  ]; // drawFocusRing not currently supported\n    // Todo: Implement these to be wrapped so can get and set data in\n    //   their own child chains\n    // Todo: `createPattern` is a wholly opaque object, so might need to\n    //    have child wrappers if implementing any known methods in the future\n  const imageDataGetterMethods = [\n    'createImageData', 'createImageDataHD', 'getImageData',\n    'getImageDataHD', 'putImageData', 'putImageDataHD'\n  ];\n  const gradientGetterMethods = [\n    'createLinearGradient', 'createRadialGradient'\n  ];\n    // Todo: createPattern to accept wrapped canvas element or context?\n  const patternGetterMethods = ['createPattern'];\n  // Do not return 'this' object since purpose is to get (and the\n  //  objects they create don't have more than one method to make it\n  //  desirable to chain, except for ImageData ones, moved to\n  //  `childGetterMethods`\n  const getterMethods = [\n    'drawCustomFocusRing', 'isPointInPath',\n    'isPointInStroke', 'measureText'\n  ]; // wrap `TextMetrics` of `measureText`?\n    // Predefined properties\n\n  // Todo: `fillStyle` and `strokeStyle` to return or be settable with\n  //  wrapped `CanvasGradient` or `CanvasPattern`, `currentTransform` with\n  //  wrapped `SVGMatrix`?\n  const props = [\n    'canvas', 'currentTransform', 'direction', 'fillStyle', 'font',\n    'globalAlpha', 'globalCompositeOperation', 'imageSmoothingEnabled',\n    'lineCap', 'lineDashOffset', 'lineJoin', 'lineWidth', 'miterLimit',\n    'shadowOffsetX', 'shadowOffsetY', 'shadowBlur', 'shadowColor',\n    'strokeStyle', 'textAlign', 'textBaseline'\n  ];\n\n  DelegateChain.addMethods(methods, C2D2Context);\n\n  DelegateChain.addGetterMethods(\n    imageDataGetterMethods, C2D2Context, C2D2ImageData\n  );\n  DelegateChain.addGetterMethods(\n    gradientGetterMethods, C2D2Context, C2D2Gradient\n  );\n  DelegateChain.addGetterMethods(\n    patternGetterMethods, C2D2Context, C2D2Pattern\n  );\n\n  DelegateChain.addGetterMethods(getterMethods, C2D2Context);\n\n  DelegateChain.addPropertyMethods(props, C2D2Context);\n}\n\nfunction c2d2Element (arr, opts) {\n  let el = opts;\n  const d = win.document || null;\n  const noArray = typeof arr !== 'object' || !arr.length;\n\n  if (noArray) {\n    el = opts = arr;\n    arr = [];\n  } else {\n    opts = opts || {};\n  }\n  const bNodeModule = opts && (opts.path || opts.fileStream);\n\n  let parent;\n  // Todo: deal with string w/h coords, number w/h coords\n  if (typeof opts === 'string') {\n    el = d.querySelector('#' + opts);\n  } else if (typeof opts === 'object' && bNodeModule) {\n    el = createCanvas();\n    const width = arr[0] || opts.width || opts.w;\n    const height = arr[1] || opts.height || opts.h;\n    if (width) {\n      el.width = width;\n    }\n    if (height) {\n      el.height = height;\n    }\n    const path = opts.fileStream || opts.path;\n    if (path) {\n      const out = fs.createWriteStream(path);\n      const stream = el.createPNGStream();\n      stream.on('data', (chunk) => {\n        out.write(chunk);\n      });\n      stream.on('end', () => {\n        out.end();\n      });\n    }\n  } else if (typeof opts === 'object' && !opts.nodeName) {\n    el = (d.createElementNS && d.documentElement.namespaceURI !== null)\n      ? d.createElementNS('http://www.w3.org/1999/xhtml', 'canvas')\n      : d.createElement('canvas');\n    if (opts.width || opts.w) {\n      el.setAttribute('width', opts.width || opts.w);\n    }\n    if (opts.height || opts.h) {\n      el.setAttribute('height', opts.height || opts.h);\n    }\n    if (opts.id) {\n      el.setAttribute('id', opts.id);\n    }\n    if (opts.style) { // Better to use a class instead\n      el.setAttribute('style', opts.style);\n    }\n    if (opts.class || opts.className) {\n      el.setAttribute('class', opts.class || opts.className);\n    }\n    parent = opts.appendTo\n      ? typeof opts.appendTo === 'string'\n        ? d.querySelector('#' + opts.appendTo)\n        : opts.appendTo\n      : d.body;\n  } else if (opts === undefined) {\n    el = d.querySelector('canvas');\n  }\n\n  if (!noArray && el.setAttribute) {\n    el.setAttribute('width', arr[0]);\n    el.setAttribute('height', arr[1]);\n  }\n  if (parent) {\n    parent.append(el);\n  }\n\n  if (win.G_vmlCanvasManager) { // If using ExplorerCanvas to get IE support: http://code.google.com/p/explorercanvas/\n    el = win.G_vmlCanvasManager.initElement(el);\n  }\n  return el;\n}\n\n/**\n* @typedef {PlainObject} WidthHeight\n* @property {Float} 0\n* @property {Float} 1\n*/\n\n/**\n* Wraps `CanvasRenderingContext2D`.\n* @class\n* @todo Could make generic CanvasContext to accept \"type\" as a\n*  property when not '2d'\n* @param {WidthHeight} arr\n* @param {PlainObject} opts\n*/\nfunction C2D2Context (arr, opts) {\n  // eslint-disable-next-line no-restricted-syntax -- Support old API\n  if (!(this instanceof C2D2Context)) {\n    return new C2D2Context(arr, opts);\n  }\n\n  const el = this.canvas = c2d2Element(arr, opts);\n\n  this.context = this.parent = el.getContext('2d');\n  if (!C2D2Context.prototype.arc) {\n    _C2D2ContextSetup();\n  }\n  // Expose the c2d2Element properties (todo: could use\n  //  `Object.defineProperty` to ensure stayed in sync)\n  this.width = el.width;\n  this.height = el.height;\n  return this; // Satisfy Netbeans\n}\n\n// Expose the c2d2Element methods\n// Todo: Wrap this method's CanvasProxy return result?\n[\n  'transferControlToProxy',\n  'getContext', 'probablySupportsContext', 'supportsContext', 'setContext',\n  'toDataURL', 'toDataURLHD', 'toBlob', 'toBlobHD'\n].forEach(function (method) {\n  C2D2Context.prototype[method] = function (...args) {\n    return this.canvas[method](...args);\n  };\n});\n\nC2D2Context.addMethods = function (methodMap) {\n  Object.entries(methodMap).forEach(([methodName, method]) => {\n    C2D2Context.prototype[methodName] = buildContextMethods(method);\n  });\n};\n\n// Unlike addMethods, requires manually supplying 'this' at the end\nC2D2Context.extend = function (obj) { // Keeps constructor property in tact\n  Object.entries(obj).forEach(([propertyName, propertyValue]) => {\n    C2D2Context.prototype[propertyName] = propertyValue;\n  });\n};\n\n// EXTENSIONS\nC2D2Context.addMethods({\n  $line (...args) {\n    const [obj, close] = args;\n    let a = args;\n    if (obj && typeof obj === 'object' && !obj.length) {\n      if (obj.color) {\n        this.$lineColor(obj.color);\n      }\n      if (obj.width || obj.w) {\n        this.lineWidth(obj.width || obj.w);\n      }\n      if (obj.shadow || obj.$shadow) {\n        this.$shadow(obj.shadow);\n      }\n      a = [...(obj.coords || obj.xy || obj.path)];\n    }\n    this.beginPath().moveTo.apply(this, a[0]);\n    a.slice(1).forEach((aItem) => {\n      this.lineTo(...aItem);\n    });\n    if (close || obj.close) {\n      this.closePath();\n    }\n    this.stroke();\n  },\n  $fill (...args) {\n    const [obj] = args;\n    let a = args;\n    if (obj && typeof obj === 'object' && !obj.length) {\n      if (obj.color) {\n        this.$fillColor(obj.color);\n      }\n      if (obj.shadow || obj.$shadow) {\n        this.$shadow(obj.shadow);\n      }\n      a = [...(obj.coords || obj.xy || obj.path)];\n    }\n    if (a[0].length === 4) {\n      return this.$fillRect(...a);\n    }\n    this.beginPath().moveTo.apply(this, a[0]);\n    a.slice(1).forEach((aItem) => {\n      this.lineTo(...aItem);\n    });\n    this.fill();\n    return this;\n  },\n  $clear (...args) {\n    this.$clearRect(...args);\n    return this;\n  },\n  $fillRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$fillRect(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.fillRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n  $clearRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$clearRect(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.clearRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n\n  // $rect, $clip, $arcTo\n\n  $strokeRect (...args) {\n    const [x, y, w, h] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        // Allow array for coordinates\n        this.$strokeRect(...arg);\n      }\n      return this;\n    }\n    this.strokeRect(x || 0, y || 0, w || this.width, h || this.height);\n    return this;\n  },\n  $arc (...args) {\n    const [x, y, radius, startAngle, endAngle, anticlockwise] = args;\n    if (x && typeof x === 'object' && x.length) {\n      for (const arg of args) {\n        this.$arc(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.arc(x, y, radius, startAngle, endAngle, anticlockwise);\n    return this;\n  },\n  $quadraticCurve (...args) {\n    this.$quadratic(...args);\n  },\n  $quadraticCurveTo (...args) {\n    this.$quadratic(...args);\n  },\n  $quadratic (...args) {\n    const [cp1x, cp1y, x, y] = args;\n    if (cp1x && typeof cp1x === 'object' && cp1x.length) {\n      for (const arg of args) {\n        this.$quadratic(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.quadraticCurveTo(cp1x, cp1y, x, y);\n    return this;\n  },\n  $bezierCurve (...args) {\n    this.$bezier(...args);\n  },\n  $bezierCurveTo (...args) {\n    this.$bezier(...args);\n  },\n  $bezier (...args) {\n    const [cp1x, cp1y, cp2x, cp2y, x, y] = args;\n    if (cp1x && typeof cp1x === 'object' && cp1x.length) {\n      for (const arg of args) {\n        this.$bezier(...arg); // Allow array for coordinates\n      }\n      return this;\n    }\n    this.bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y);\n    return this;\n  }\n});\nC2D2Context.extend({ // Don't auto-return 'this' object for these\n  $shadowColor (value) {\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.shadowColor(value);\n  },\n  $fillColor (value) { // getter or setter\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.fillStyle(value);\n  },\n  $lineColor (value) { // getter or setter\n    if (value === 'random') {\n      value = C2D2Context.randomColor();\n    }\n    return this.strokeStyle(value);\n  },\n  $imageData (...args) {\n    if (typeof args[0] === 'object' && args[1] !== undefined) {\n      this.putImageData(...args);\n      return this;\n    }\n    if (args[2] !== undefined) {\n      return this.getImageData(...args); // data (length), width, height\n    }\n    return this.createImageData(...args);\n  },\n  $shadowOffset (x, y) {\n    if (x === undefined) {\n      return [this.shadowOffsetX(), this.shadowOffsetY()];\n    }\n\n    if (typeof x === 'object' && !y && x.length) {\n      y = x[1];\n      x = x[0];\n    } else if (typeof x === 'string' && x.includes(', ')) {\n      ([x, y] = x.split(/\\s*,\\s*/u));\n    }\n    this.shadowOffsetX(x).shadowOffsetY(y);\n    return this;\n  },\n  $shadowBlur (...args) { // Just a place-holder, at least for now\n    this.shadowBlur(...args);\n  },\n  $shadowOffsetY (...args) { // Just a place-holder, at least for now\n    this.shadowOffsetY(...args);\n  },\n  $shadowOffsetX (...args) { // Just a place-holder, at least for now\n    this.shadowOffsetX(...args);\n  },\n  $shadow (sh) {\n    if (sh === undefined) { // Not super useful compared to native\n      return {\n        offset: this.$shadowOffset(), blur: this.shadowBlur(),\n        color: this.$shadowColor(),\n        offsetX: this.shadowOffsetX(), offsetY: this.shadowOffsetY()\n      };\n    }\n    Object.entries(sh).forEach(([att, shadowOffset]) => {\n      // Offer additional property to get the coords together\n      if (att === 'offset') {\n        this.$shadowOffset(shadowOffset);\n      } else {\n        this[\n          `$shadow${att.charAt(0).toUpperCase() + att.slice(1)}`\n        ](shadowOffset);\n      }\n    });\n    return this;\n  }\n});\n\nC2D2Context.randomNumber = function (min = 0, max = 1) {\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n\n// See also the individual methods which use this (allowing\n//  \"random\" as a \"color\" argument)\nC2D2Context.randomColor = function (\n  r = 0, g = 0, b = 0, rmax = 255, gmax = 255, bmax = 255\n) {\n  const red = C2D2Context.randomNumber(r, rmax),\n    green = C2D2Context.randomNumber(g, gmax),\n    blue = C2D2Context.randomNumber(b, bmax);\n  return `rgb${red}, ${green}, ${blue})`;\n};\n\nfunction _getPropertyFromStyleSheet (ss, selectorText, propertyName) {\n  const rules = ss.cssRules || ss.rules; // Mozilla or IE\n  for (let j = 0, crl = rules.length; j < crl; j++) {\n    const rule = rules[j];\n    try {\n      if (rule.type === 1 && // CSSRule.STYLE_RULE\n                rule.selectorText === selectorText) {\n        return rule.style.getPropertyValue(propertyName);\n      }\n    } catch (err) { // IE\n      if (rule.selectorText === selectorText) {\n        propertyName = propertyName.replace(/-[a-z]/gu, String.prototype.toUpperCase);\n        return rule.style[propertyName];\n      }\n    }\n  }\n  return false;\n}\n\n/**\n* Useful for separation of concerns, detecting the CSS style rule for a\n* given class, id, or other selector and applying it as an argument to\n* a canvas method, so that the JavaScript does not need to be concerned\n* with secondary styling (of course the images it generates is a kind\n* of style).\n* @param {string} selectorText\n* @param {string} propertyName\n* @param {CSSStyleSheet} sheet\n* @returns {string}\n*/\nC2D2Context.getCSSPropertyValue = function (selectorText, propertyName, sheet) {\n  let ss, val;\n  if (sheet !== undefined) {\n    ss = document.styleSheets[sheet];\n    return _getPropertyFromStyleSheet(ss, selectorText, propertyName);\n  }\n  [...document.styleSheets].some((styleSheet) => {\n    val = _getPropertyFromStyleSheet(\n      styleSheet, selectorText, propertyName\n    );\n    return val;\n  });\n  return val;\n};\n\n// Attach classes for sake of extensibility (or utilization for canvasElement)\nC2D2Context.CanvasPixelArray = C2D2CanvasPixelArray;\nC2D2Context.ImageData = C2D2ImageData;\nC2D2Context.Gradient = C2D2Gradient;\nC2D2Context.Pattern = C2D2Pattern;\nC2D2Context.canvasElement = c2d2Element;\n\nexport default C2D2Context;\n"],"names":["fs","createCanvas","require","win","window","global","buildMethod","m","parent","this","buildGetterMethod","gm","methodFromProperty","WrapperClass","args","imageData","_typeof","buildLiteralGetterMethod","buildPropertyMethod","p","value","undefined","DelegateChain","methods","clss","method","prototype","getterMethods","getterMethod","props","prop","C2D2CanvasPixelArray","canvasPixelArrayObj","length","item","value2","array","pixelArray","C2D2ImageData","imageDataObj","width","C2D2Gradient","gradientObj","addColorStop","gradient","C2D2Pattern","patternObj","pattern","c2d2Element","arr","opts","el","d","document","noArray","bNodeModule","path","fileStream","querySelector","w","height","h","out","createWriteStream","stream","createPNGStream","on","chunk","write","end","nodeName","createElementNS","documentElement","namespaceURI","createElement","setAttribute","id","style","className","appendTo","body","append","G_vmlCanvasManager","initElement","C2D2Context","canvas","context","getContext","arc","_getPropertyFromStyleSheet","ss","selectorText","propertyName","rules","cssRules","j","crl","rule","type","getPropertyValue","err","replace","String","toUpperCase","forEach","addMethods","methodMap","Object","entries","methodName","apply","buildContextMethods","extend","obj","propertyValue","$line","close","a","color","$lineColor","lineWidth","shadow","$shadow","coords","xy","beginPath","moveTo","slice","aItem","_this","lineTo","closePath","stroke","$fill","$fillColor","$fillRect","_this2","fill","$clear","$clearRect","x","y","arg","fillRect","clearRect","$strokeRect","strokeRect","$arc","radius","startAngle","endAngle","anticlockwise","$quadraticCurve","$quadratic","$quadraticCurveTo","cp1x","cp1y","quadraticCurveTo","$bezierCurve","$bezier","$bezierCurveTo","cp2x","cp2y","bezierCurveTo","$shadowColor","randomColor","shadowColor","fillStyle","strokeStyle","$imageData","putImageData","getImageData","createImageData","$shadowOffset","shadowOffsetX","shadowOffsetY","includes","split","$shadowBlur","shadowBlur","$shadowOffsetY","$shadowOffsetX","sh","offset","blur","offsetX","offsetY","att","shadowOffset","_this3","charAt","randomNumber","min","max","Math","floor","random","r","g","b","rmax","gmax","bmax","red","green","blue","getCSSPropertyValue","sheet","val","styleSheets","some","styleSheet","CanvasPixelArray","ImageData","Gradient","Pattern","canvasElement"],"mappings":"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"}