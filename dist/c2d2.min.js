!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.C2D2=e()}(this,function(){"use strict";function t(t,e){for(let o=0,r=t.length;o<r;o++)e(t[o],o)}function e(e){let o=arguments;if("string"==typeof e){o=[],t(e.trim().replace(/\s*,\s+/g,", ").split(/\s+/),(t,e)=>{o[e]=t.split(", ")})}return o}const o="undefined"==typeof window?global:window;function r(t){return function(...e){return this.parent[t](...e),this}}function i(t,e,o){return function(r){const i=[].slice.call(arguments);return"putImageData"===t&&"object"==typeof r&&r.imageData&&(i[0]=r.imageData),new o(e?this.parent[t]:this.parent[t](...i))}}function n(t){return function(...e){return this.parent[t](...e)}}function s(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}function a(t){return function(...e){return t.apply(this,...e),this}}const h={addMethods(t,e){for(let o=0,i=t.length;o<i;o++){const i=t[o];e.prototype[i]=r(i)}},addGetterMethods(t,e,o,r){for(let s=0,a=t.length;s<a;s++){const a=t[s];e.prototype[a]=o?i(a,r,o):n(a)}},addPropertyMethods(t,e){for(let o=0,r=t.length;o<r;o++){const r=t[o];e.prototype[r]=s(r)}}};function l(t){l.prototype.length||(l.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},h.addPropertyMethods(["length"],l)),this.parent=this.array=this.pixelArray=t}function d(t){d.prototype.width||(h.addGetterMethods(["data"],d,l,!0),h.addPropertyMethods(["width","height","resolution"],d)),this.parent=this.imageData=t}function c(t){c.prototype.addColorStop||h.addMethods(["addColorStop"],c),this.parent=this.gradient=t}function f(t){return this.parent=this.pattern=t,t}function u(t,e){let r=e;const i=o.document||null,n="object"!=typeof t||!t.length;n?(r=e=t,t=[]):e=e||{};const s=e&&(e.path||e.fileStream);let a;if("string"==typeof e)r=i.getElementById(e);else if("object"==typeof e&&s){r=new(require("canvas"));const o=t[0]||e.width||e.w,i=t[1]||e.height||e.h;o&&(r.width=o),i&&(r.height=i);const n=e.fileStream||e.path;if(n){const t=require("fs").createWriteStream(n),e=r.createPNGStream();e.on("data",e=>{t.write(e)}),e.on("end",()=>{t.end()})}}else"object"!=typeof e||e.nodeName?void 0===e&&(r=i.getElementsByTagName("canvas")[0]):(r=i.createElementNS&&null!==i.documentElement.namespaceURI?i.createElementNS("http://www.w3.org/1999/xhtml","canvas"):i.createElement("canvas"),(e.width||e.w)&&r.setAttribute("width",e.width||e.w),(e.height||e.h)&&r.setAttribute("height",e.height||e.h),e.id&&r.setAttribute("id",e.id),e.style&&r.setAttribute("style",e.style),e.innerHTML&&(r.innerHTML=e.innerHTML),(e.class||e.className)&&r.setAttribute("class",e.class||e.className),a=e.appendTo?"string"==typeof e.appendTo?i.getElementById(e.appendTo):e.appendTo:i.body);return!n&&r.setAttribute&&(r.setAttribute("width",t[0]),r.setAttribute("height",t[1])),a&&a.appendChild(r),o.G_vmlCanvasManager&&(r=o.G_vmlCanvasManager.initElement(r)),r}function p(t,e){if(!(this instanceof p))return new p(t,e);const o=this.canvas=u(t,e);return this.context=this.parent=o.getContext("2d"),p.prototype.arc||(h.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],p),h.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],p,d),h.addGetterMethods(["createLinearGradient","createRadialGradient"],p,c),h.addGetterMethods(["createPattern"],p,f),h.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],p),h.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],p)),this.width=o.width,this.height=o.height,this}return t(["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"],function(t){p.prototype[t]=function(...e){return this.canvas[t](...e)}}),p.addMethods=function(t){for(const e in t)if(t.hasOwnProperty(e)){const o=t[e];p.prototype[e]=a(o)}},p.extend=function(t){for(const e in t)t.hasOwnProperty(e)&&(p.prototype[e]=t[e])},p.addMethods({$line(t,o){let r;t&&"object"==typeof t&&!t.length?(t.color&&this.$lineColor(t.color),(t.width||t.w)&&this.lineWidth(t.width||t.w),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),r=e.apply(null,t.coords||t.xy||t.path)):r=e.apply(null,arguments),this.beginPath().moveTo.apply(this,r[0]);for(let t=1,e=r.length;t<e;t++)this.lineTo(...r[t]);(o||t.close)&&this.closePath(),this.stroke()},$fill(t){let o;if(t&&"object"==typeof t&&!t.length?(t.color&&this.$fillColor(t.color),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),o=e.apply(null,t.coords||t.xy||t.path)):o=e.apply(null,arguments),4===o[0].length)return this.$fillRect(...o);this.beginPath().moveTo.apply(this,o[0]);for(let t=1,e=o.length;t<e;t++)this.lineTo(...o[t]);this.fill()},$clear(...t){this.$clearRect(...t)},$fillRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$fillRect(...arguments[t]);return this}this.fillRect(t||0,e||0,o||this.width,r||this.height)},$clearRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$clearRect(...arguments[t]);return this}this.clearRect(t||0,e||0,o||this.width,r||this.height)},$strokeRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$strokeRect(...arguments[t]);return this}this.strokeRect(t||0,e||0,o||this.width,r||this.height)},$arc(t,e,o,r,i,n){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$arc(...arguments[t]);return this}this.arc(t,e,o,r,i,n)},$quadraticCurve(...t){this.$quadratic(...t)},$quadraticCurveTo(...t){this.$quadratic(...t)},$quadratic(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$quadratic(...arguments[t]);return this}this.quadraticCurveTo(t,e,o,r)},$bezierCurve(...t){this.$bezier(...t)},$bezierCurveTo(...t){this.$bezier(...t)},$bezier(t,e,o,r,i,n){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$bezier(...arguments[t]);return this}this.bezierCurveTo(t,e,o,r,i,n)}}),p.extend({$shadowColor(t){return"random"===t&&(t=p.randomColor()),this.shadowColor(t)},$fillColor(t){return"random"===t&&(t=p.randomColor()),this.fillStyle(t)},$lineColor(t){return"random"===t&&(t=p.randomColor()),this.strokeStyle(t)},$imageData(...t){return"object"==typeof t[0]&&void 0!==t[1]?(this.putImageData(...t),this):void 0!==t[2]?this.getImageData(...t):this.createImageData(...t)},$shadowOffset(t,e){return void 0===t?[this.shadowOffsetX(),this.shadowOffsetY()]:("object"==typeof t&&!e&&t.length?(e=t[1],t=t[0]):"string"==typeof t&&-1!==t.indexOf(", ")&&([t,e]=t.split(/\s*,\s*/)),this.shadowOffsetX(t).shadowOffsetY(e),this)},$shadowBlur(...t){this.shadowBlur(...t)},$shadowOffsetY(...t){this.shadowOffsetY(...t)},$shadowOffsetX(...t){this.shadowOffsetX(...t)},$shadow(t){if(void 0===t)return{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()};for(const e in t)t.hasOwnProperty(e)&&("offset"===e?this.$shadowOffset(t[e]):this["$shadow"+e.charAt(0).toUpperCase()+e.slice(1)](t[e]));return this}}),p.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},p.randomColor=function(t,e,o,r,i,n){return t=t||0,e=e||0,o=o||0,r=r||255,i=i||255,n=n||255,"rgb("+p.randomNumber(t,r)+", "+p.randomNumber(e,i)+", "+p.randomNumber(o,n)+")"},p.getCSSPropertyValue=function(t,e,o){function r(t,e,o){const r=t.cssRules||t.rules;for(let t=0,i=r.length;t<i;t++){const i=r[t];try{if(1===i.type&&i.selectorText===e)return i.style.getPropertyValue(o)}catch(t){if(i.selectorText===e)return o=o.replace(/-([a-z])/g,String.prototype.toUpperCase),i.style[o]}}return!1}let i,n;if(void 0!==o)return r(i=document.styleSheets[o],t,e);for(let o=0,s=document.styleSheets.length;o<s&&!(n=r(i=document.styleSheets[o],t,e));o++);return n},p.CanvasPixelArray=l,p.ImageData=d,p.Gradient=c,p.Pattern=f,p.canvasElement=u,p});
//# sourceMappingURL=c2d2.min.js.map
