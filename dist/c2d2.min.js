!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.C2D2=e()}(this,function(){"use strict";function t(t,e){for(let o=0,r=t.length;o<r;o++)e(t[o],o)}function e(e){let o,r=arguments;return"string"==typeof e&&(r=[],t(o=e.trim().replace(/\s*,\s+/g,", ").split(/\s+/),(t,e)=>{r[e]=t.split(", ")})),r}const o="undefined"==typeof window?global:window;function r(t){return function(){return this.parent[t].apply(this.parent,arguments),this}}function i(t,e,o){return function(r){const i=[].slice.call(arguments);return"putImageData"===t&&"object"==typeof r&&r.imageData&&(i[0]=r.imageData),new o(e?this.parent[t]:this.parent[t].apply(this.parent,i))}}function s(t){return function(){return this.parent[t].apply(this.parent,arguments)}}function a(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}function n(t){return function(){return t.apply(this,arguments),this}}const h={addMethods(t,e){for(let o=0,i=t.length;o<i;o++){const i=t[o];e.prototype[i]=r(i)}},addGetterMethods(t,e,o,r){for(let a=0,n=t.length;a<n;a++){const n=t[a];e.prototype[n]=o?i(n,r,o):s(n)}},addPropertyMethods(t,e){for(let o=0,r=t.length;o<r;o++){const r=t[o];e.prototype[r]=a(r)}}};function l(t){l.prototype.length||(l.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},h.addPropertyMethods(["length"],l)),this.parent=this.array=this.pixelArray=t}function d(t){d.prototype.width||(h.addGetterMethods(["data"],d,l,!0),h.addPropertyMethods(["width","height","resolution"],d)),this.parent=this.imageData=t}function p(t){p.prototype.addColorStop||h.addMethods(["addColorStop"],p),this.parent=this.gradient=t}function c(t){return this.parent=this.pattern=t,t}function f(t,e){let r,i,s,a,n,h,l,d,p=e;const c=o.document||null,f="object"!=typeof t||!t.length;f?(p=e=t,t=[]):e=e||{};const u=e&&(e.path||e.fileStream);return"string"==typeof e?p=c.getElementById(e):"object"==typeof e&&u?(p=new(i=require("canvas")),l=t[0]||e.width||e.w,d=t[1]||e.height||e.h,l&&(p.width=l),d&&(p.height=d),(h=e.fileStream||e.path)&&(s=require("fs"),a=s.createWriteStream(h),(n=p.createPNGStream()).on("data",t=>{a.write(t)}),n.on("end",()=>{a.end()}))):"object"!=typeof e||e.nodeName?void 0===e&&(p=c.getElementsByTagName("canvas")[0]):(p=c.createElementNS&&null!==c.documentElement.namespaceURI?c.createElementNS("http://www.w3.org/1999/xhtml","canvas"):c.createElement("canvas"),(e.width||e.w)&&p.setAttribute("width",e.width||e.w),(e.height||e.h)&&p.setAttribute("height",e.height||e.h),e.id&&p.setAttribute("id",e.id),e.style&&p.setAttribute("style",e.style),e.innerHTML&&(p.innerHTML=e.innerHTML),(e.class||e.className)&&p.setAttribute("class",e.class||e.className),r=e.appendTo?"string"==typeof e.appendTo?c.getElementById(e.appendTo):e.appendTo:c.body),!f&&p.setAttribute&&(p.setAttribute("width",t[0]),p.setAttribute("height",t[1])),r&&r.appendChild(p),o.G_vmlCanvasManager&&(p=o.G_vmlCanvasManager.initElement(p)),p}function u(t,e){if(!(this instanceof u))return new u(t,e);const o=this.canvas=f(t,e);return this.context=this.parent=o.getContext("2d"),u.prototype.arc||(h.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],u),h.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],u,d),h.addGetterMethods(["createLinearGradient","createRadialGradient"],u,p),h.addGetterMethods(["createPattern"],u,c),h.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],u),h.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],u)),this.width=o.width,this.height=o.height,this}return t(["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"],function(t){u.prototype[t]=function(){return this.canvas[t].apply(this.canvas,arguments)}}),u.addMethods=function(t){for(const e in t)if(t.hasOwnProperty(e)){const o=t[e];u.prototype[e]=n(o)}},u.extend=function(t){for(const e in t)t.hasOwnProperty(e)&&(u.prototype[e]=t[e])},u.addMethods({$line(t,o){let r;t&&"object"==typeof t&&!t.length?(t.color&&this.$lineColor(t.color),(t.width||t.w)&&this.lineWidth(t.width||t.w),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),r=e.apply(null,t.coords||t.xy||t.path)):r=e.apply(null,arguments),this.beginPath().moveTo.apply(this,r[0]);for(let t=1,e=r.length;t<e;t++)this.lineTo.apply(this,r[t]);(o||t.close)&&this.closePath(),this.stroke()},$fill(t){let o;if(t&&"object"==typeof t&&!t.length?(t.color&&this.$fillColor(t.color),(t.shadow||t.$shadow)&&this.$shadow(t.shadow),o=e.apply(null,t.coords||t.xy||t.path)):o=e.apply(null,arguments),4===o[0].length)return this.$fillRect.apply(this,o);this.beginPath().moveTo.apply(this,o[0]);for(let t=1,e=o.length;t<e;t++)this.lineTo.apply(this,o[t]);this.fill()},$clear(){this.$clearRect.apply(this,arguments)},$fillRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$fillRect.apply(this,arguments[t]);return this}this.fillRect(t||0,e||0,o||this.width,r||this.height)},$clearRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$clearRect.apply(this,arguments[t]);return this}this.clearRect(t||0,e||0,o||this.width,r||this.height)},$strokeRect(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$strokeRect.apply(this,arguments[t]);return this}this.strokeRect(t||0,e||0,o||this.width,r||this.height)},$arc(t,e,o,r,i,s){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$arc.apply(this,arguments[t]);return this}this.arc(t,e,o,r,i,s)},$quadraticCurve(){this.$quadratic.apply(this,arguments)},$quadraticCurveTo(){this.$quadratic.apply(this,arguments)},$quadratic(t,e,o,r){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$quadratic.apply(this,arguments[t]);return this}this.quadraticCurveTo(t,e,o,r)},$bezierCurve(){this.$bezier.apply(this,arguments)},$bezierCurveTo(){this.$bezier.apply(this,arguments)},$bezier(t,e,o,r,i,s){if(t&&"object"==typeof t&&t.length){for(let t=0,e=arguments.length;t<e;t++)this.$bezier.apply(this,arguments[t]);return this}this.bezierCurveTo(t,e,o,r,i,s)}}),u.extend({$shadowColor(t){return"random"===t&&(t=u.randomColor()),this.shadowColor(t)},$fillColor(t){return"random"===t&&(t=u.randomColor()),this.fillStyle(t)},$lineColor(t){return"random"===t&&(t=u.randomColor()),this.strokeStyle(t)},$imageData(...t){return"object"==typeof t[0]&&void 0!==t[1]?(this.putImageData(...t),this):void 0!==t[2]?this.getImageData(...t):this.createImageData(...t)},$shadowOffset(t,e){return void 0===t?[this.shadowOffsetX(),this.shadowOffsetY()]:("object"==typeof t&&!e&&t.length?(e=t[1],t=t[0]):"string"==typeof t&&-1!==t.indexOf(", ")&&([t,e]=t.split(/\s*,\s*/)),this.shadowOffsetX(t).shadowOffsetY(e),this)},$shadowBlur(...t){this.shadowBlur(...t)},$shadowOffsetY(...t){this.shadowOffsetY(...t)},$shadowOffsetX(...t){this.shadowOffsetX(...t)},$shadow(t){let e;if(void 0===t)return{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()};for(e in t)t.hasOwnProperty(e)&&("offset"===e?this.$shadowOffset(t[e]):this["$shadow"+e.charAt(0).toUpperCase()+e.slice(1)](t[e]));return this}}),u.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},u.randomColor=function(t,e,o,r,i,s){return t=t||0,e=e||0,o=o||0,r=r||255,i=i||255,s=s||255,"rgb("+u.randomNumber(t,r)+", "+u.randomNumber(e,i)+", "+u.randomNumber(o,s)+")"},u.getCSSPropertyValue=function(t,e,o){let r,i,s=0,a=0,n=0,h=0;function l(t,e,o){const r=t.cssRules||t.rules;for(a=0,h=r.length;a<h;a++){const t=r[a];try{if(1===t.type&&t.selectorText===e)return t.style.getPropertyValue(o)}catch(r){if(t.selectorText===e)return o=o.replace(/-([a-z])/g,String.prototype.toUpperCase),t.style[o]}}return!1}if(void 0!==o)return l(r=document.styleSheets[o],t,e);for(s=0,n=document.styleSheets.length;s<n&&!(i=l(r=document.styleSheets[s],t,e));s++);return i},u.CanvasPixelArray=l,u.ImageData=d,u.Gradient=p,u.Pattern=c,u.canvasElement=f,u});
//# sourceMappingURL=c2d2.min.js.map
