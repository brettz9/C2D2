!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).C2D2=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var n,o;if("undefined"!=typeof require){var a=require("canvas");o=a.createCanvas,n=require("fs")}var i="undefined"==typeof window?global:window;function s(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments),this}}function l(e,r,n){return function(){for(var o,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var l=i[0];return"putImageData"===e&&"object"===t(l)&&l.imageData&&(i[0]=l.imageData),new n(r?this.parent[e]:(o=this.parent)[e].apply(o,i))}}function h(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments)}}function u(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}var c=function(t,e){var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var l=a.value;e.prototype[l]=s(l)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}},f=function(t,e,r,n){var o=!0,a=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var c=s.value;e.prototype[c]=r?l(c,n,r):h(c)}}catch(t){a=!0,i=t}finally{try{o||null==u.return||u.return()}finally{if(a)throw i}}},d=function(t,e){var r=!0,n=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=a.value;e.prototype[s]=u(s)}}catch(t){n=!0,o=t}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}};function p(t){p.prototype.length||(p.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},d(["length"],p)),this.parent=this.array=this.pixelArray=t}function y(t){y.prototype.width||(f(["data"],y,p,!0),d(["width","height","resolution"],y)),this.parent=this.imageData=t}function v(t){v.prototype.addColorStop||c(["addColorStop"],v),this.parent=this.gradient=t}function m(t){return this.parent=this.pattern=t,t}function g(e,r){var a=r,s=i.document||null,l="object"!==t(e)||!e.length;l?(a=r=e,e=[]):r=r||{};var h,u=r&&(r.path||r.fileStream);if("string"==typeof r)a=s.querySelector("#"+r);else if("object"===t(r)&&u){a=o();var c=e[0]||r.width||r.w,f=e[1]||r.height||r.h;c&&(a.width=c),f&&(a.height=f);var d=r.fileStream||r.path;if(d){var p=n.createWriteStream(d),y=a.createPNGStream();y.on("data",(function(t){p.write(t)})),y.on("end",(function(){p.end()}))}}else"object"!==t(r)||r.nodeName?void 0===r&&(a=s.querySelector("canvas")):(a=s.createElementNS&&null!==s.documentElement.namespaceURI?s.createElementNS("http://www.w3.org/1999/xhtml","canvas"):s.createElement("canvas"),(r.width||r.w)&&a.setAttribute("width",r.width||r.w),(r.height||r.h)&&a.setAttribute("height",r.height||r.h),r.id&&a.setAttribute("id",r.id),r.style&&a.setAttribute("style",r.style),(r.class||r.className)&&a.setAttribute("class",r.class||r.className),h=r.appendTo?"string"==typeof r.appendTo?s.querySelector("#"+r.appendTo):r.appendTo:s.body);return!l&&a.setAttribute&&(a.setAttribute("width",e[0]),a.setAttribute("height",e[1])),h&&h.append(a),i.G_vmlCanvasManager&&(a=i.G_vmlCanvasManager.initElement(a)),a}function w(t,e){if(!(this instanceof w))return new w(t,e);var r=this.canvas=g(t,e);return this.context=this.parent=r.getContext("2d"),w.prototype.arc||(c(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],w),f(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],w,y),f(["createLinearGradient","createRadialGradient"],w,v),f(["createPattern"],w,m),f(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],w),d(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],w)),this.width=r.width,this.height=r.height,this}function b(t,e,r){for(var n=t.cssRules||t.rules,o=0,a=n.length;o<a;o++){var i=n[o];try{if(1===i.type&&i.selectorText===e)return i.style.getPropertyValue(r)}catch(t){if(i.selectorText===e)return r=r.replace(/\x2D[a-z]/g,String.prototype.toUpperCase),i.style[r]}}return!1}return["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"].forEach((function(t){w.prototype[t]=function(){var e;return(e=this.canvas)[t].apply(e,arguments)}})),w.addMethods=function(t){Object.entries(t).forEach((function(t){var r=e(t,2),n=r[0],o=r[1];w.prototype[n]=function(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(this,r),this}}(o)}))},w.extend=function(t){Object.entries(t).forEach((function(t){var r=e(t,2),n=r[0],o=r[1];w.prototype[n]=o}))},w.addMethods({$line:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=o[0],s=o[1],l=o;i&&"object"===t(i)&&!i.length&&(i.color&&this.$lineColor(i.color),(i.width||i.w)&&this.lineWidth(i.width||i.w),(i.shadow||i.$shadow)&&this.$shadow(i.shadow),l=r(i.coords||i.xy||i.path)),this.beginPath().moveTo.apply(this,l[0]),l.slice(1).forEach((function(t){e.lineTo.apply(e,r(t))})),(s||i.close)&&this.closePath(),this.stroke()},$fill:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=o[0],s=o;return i&&"object"===t(i)&&!i.length&&(i.color&&this.$fillColor(i.color),(i.shadow||i.$shadow)&&this.$shadow(i.shadow),s=r(i.coords||i.xy||i.path)),4===s[0].length?this.$fillRect.apply(this,r(s)):(this.beginPath().moveTo.apply(this,s[0]),s.slice(1).forEach((function(t){e.lineTo.apply(e,r(t))})),this.fill(),this)},$clear:function(){return this.$clearRect.apply(this,arguments),this},$fillRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3];if(a&&"object"===t(a)&&a.length){var h=!0,u=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(h=(f=d.next()).done);h=!0){var p=f.value;this.$fillRect.apply(this,r(p))}}catch(t){u=!0,c=t}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return this}return this.fillRect(a||0,i||0,s||this.width,l||this.height),this},$clearRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3];if(a&&"object"===t(a)&&a.length){var h=!0,u=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(h=(f=d.next()).done);h=!0){var p=f.value;this.$clearRect.apply(this,r(p))}}catch(t){u=!0,c=t}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return this}return this.clearRect(a||0,i||0,s||this.width,l||this.height),this},$strokeRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3];if(a&&"object"===t(a)&&a.length){var h=!0,u=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(h=(f=d.next()).done);h=!0){var p=f.value;this.$strokeRect.apply(this,r(p))}}catch(t){u=!0,c=t}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return this}return this.strokeRect(a||0,i||0,s||this.width,l||this.height),this},$arc:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3],h=n[4],u=n[5];if(a&&"object"===t(a)&&a.length){var c=!0,f=!1,d=void 0;try{for(var p,y=n[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var v=p.value;this.$arc.apply(this,r(v))}}catch(t){f=!0,d=t}finally{try{c||null==y.return||y.return()}finally{if(f)throw d}}return this}return this.arc(a,i,s,l,h,u),this},$quadraticCurve:function(){this.$quadratic.apply(this,arguments)},$quadraticCurveTo:function(){this.$quadratic.apply(this,arguments)},$quadratic:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3];if(a&&"object"===t(a)&&a.length){var h=!0,u=!1,c=void 0;try{for(var f,d=n[Symbol.iterator]();!(h=(f=d.next()).done);h=!0){var p=f.value;this.$quadratic.apply(this,r(p))}}catch(t){u=!0,c=t}finally{try{h||null==d.return||d.return()}finally{if(u)throw c}}return this}return this.quadraticCurveTo(a,i,s,l),this},$bezierCurve:function(){this.$bezier.apply(this,arguments)},$bezierCurveTo:function(){this.$bezier.apply(this,arguments)},$bezier:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var a=n[0],i=n[1],s=n[2],l=n[3],h=n[4],u=n[5];if(a&&"object"===t(a)&&a.length){var c=!0,f=!1,d=void 0;try{for(var p,y=n[Symbol.iterator]();!(c=(p=y.next()).done);c=!0){var v=p.value;this.$bezier.apply(this,r(v))}}catch(t){f=!0,d=t}finally{try{c||null==y.return||y.return()}finally{if(f)throw d}}return this}return this.bezierCurveTo(a,i,s,l,h,u),this}}),w.extend({$shadowColor:function(t){return"random"===t&&(t=w.randomColor()),this.shadowColor(t)},$fillColor:function(t){return"random"===t&&(t=w.randomColor()),this.fillStyle(t)},$lineColor:function(t){return"random"===t&&(t=w.randomColor()),this.strokeStyle(t)},$imageData:function(){return"object"===t(arguments.length<=0?void 0:arguments[0])&&void 0!==(arguments.length<=1?void 0:arguments[1])?(this.putImageData.apply(this,arguments),this):void 0!==(arguments.length<=2?void 0:arguments[2])?this.getImageData.apply(this,arguments):this.createImageData.apply(this,arguments)},$shadowOffset:function(r,n){if(void 0===r)return[this.shadowOffsetX(),this.shadowOffsetY()];if("object"===t(r)&&!n&&r.length)n=r[1],r=r[0];else if("string"==typeof r&&r.includes(", ")){var o=e(r.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/),2);r=o[0],n=o[1]}return this.shadowOffsetX(r).shadowOffsetY(n),this},$shadowBlur:function(){this.shadowBlur.apply(this,arguments)},$shadowOffsetY:function(){this.shadowOffsetY.apply(this,arguments)},$shadowOffsetX:function(){this.shadowOffsetX.apply(this,arguments)},$shadow:function(t){var r=this;return void 0===t?{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(Object.entries(t).forEach((function(t){var n=e(t,2),o=n[0],a=n[1];"offset"===o?r.$shadowOffset(a):r["$shadow".concat(o.charAt(0).toUpperCase()+o.slice(1))](a)})),this)}}),w.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},w.randomColor=function(t,e,r,n,o,a){t=t||0,e=e||0,r=r||0,n=n||255,o=o||255,a=a||255;var i=w.randomNumber(t,n),s=w.randomNumber(e,o),l=w.randomNumber(r,a);return"rgb".concat(i,", ").concat(s,", ").concat(l,")")},w.getCSSPropertyValue=function(t,e,n){var o;return void 0!==n?b(document.styleSheets[n],t,e):(r(document.styleSheets).some((function(r){return o=b(r,t,e)})),o)},w.CanvasPixelArray=p,w.ImageData=y,w.Gradient=v,w.Pattern=m,w.canvasElement=g,w}));
//# sourceMappingURL=c2d2.min.js.map
