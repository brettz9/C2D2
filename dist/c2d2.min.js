!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).C2D2=e()}(this,(function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!e||r.length!==e);n=!0);}catch(t){o=!0,a=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(t,e)||n(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||n(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t){if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(t=n(t))){var e=0,r=function(){};return{s:r,n:function(){return e>=t.length?{done:!0}:{done:!1,value:t[e++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a,i=!0,s=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){s=!0,a=t},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw a}}}}var i,s;if("undefined"!=typeof require){var h=require("canvas");s=h.createCanvas,i=require("fs")}var l="undefined"==typeof window?global:window;function u(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments),this}}function c(e,r,n){return function(){for(var o,a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var h=i[0];return"putImageData"===e&&"object"===t(h)&&h.imageData&&(i[0]=h.imageData),new n(r?this.parent[e]:(o=this.parent)[e].apply(o,i))}}function f(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments)}}function d(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}var p=function(t,e){var r,n=a(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e.prototype[o]=u(o)}}catch(t){n.e(t)}finally{n.f()}},y=function(t,e,r,n){var o,i=a(t);try{for(i.s();!(o=i.n()).done;){var s=o.value;e.prototype[s]=r?c(s,n,r):f(s)}}catch(t){i.e(t)}finally{i.f()}},v=function(t,e){var r,n=a(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;e.prototype[o]=d(o)}}catch(t){n.e(t)}finally{n.f()}};function m(t){m.prototype.length||(m.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},v(["length"],m)),this.parent=this.array=this.pixelArray=t}function g(t){g.prototype.width||(y(["data"],g,m,!0),v(["width","height","resolution"],g)),this.parent=this.imageData=t}function w(t){w.prototype.addColorStop||p(["addColorStop"],w),this.parent=this.gradient=t}function b(t){return this.parent=this.pattern=t,t}function $(e,r){var n=r,o=l.document||null,a="object"!==t(e)||!e.length;a?(n=r=e,e=[]):r=r||{};var h,u=r&&(r.path||r.fileStream);if("string"==typeof r)n=o.querySelector("#"+r);else if("object"===t(r)&&u){n=s();var c=e[0]||r.width||r.w,f=e[1]||r.height||r.h;c&&(n.width=c),f&&(n.height=f);var d=r.fileStream||r.path;if(d){var p=i.createWriteStream(d),y=n.createPNGStream();y.on("data",(function(t){p.write(t)})),y.on("end",(function(){p.end()}))}}else"object"!==t(r)||r.nodeName?void 0===r&&(n=o.querySelector("canvas")):(n=o.createElementNS&&null!==o.documentElement.namespaceURI?o.createElementNS("http://www.w3.org/1999/xhtml","canvas"):o.createElement("canvas"),(r.width||r.w)&&n.setAttribute("width",r.width||r.w),(r.height||r.h)&&n.setAttribute("height",r.height||r.h),r.id&&n.setAttribute("id",r.id),r.style&&n.setAttribute("style",r.style),(r.class||r.className)&&n.setAttribute("class",r.class||r.className),h=r.appendTo?"string"==typeof r.appendTo?o.querySelector("#"+r.appendTo):r.appendTo:o.body);return!a&&n.setAttribute&&(n.setAttribute("width",e[0]),n.setAttribute("height",e[1])),h&&h.append(n),l.G_vmlCanvasManager&&(n=l.G_vmlCanvasManager.initElement(n)),n}function S(t,e){if(!(this instanceof S))return new S(t,e);var r=this.canvas=$(t,e);return this.context=this.parent=r.getContext("2d"),S.prototype.arc||(p(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],S),y(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],S,g),y(["createLinearGradient","createRadialGradient"],S,w),y(["createPattern"],S,b),y(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],S),v(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],S)),this.width=r.width,this.height=r.height,this}function C(t,e,r){for(var n=t.cssRules||t.rules,o=0,a=n.length;o<a;o++){var i=n[o];try{if(1===i.type&&i.selectorText===e)return i.style.getPropertyValue(r)}catch(t){if(i.selectorText===e)return r=r.replace(/\x2D[a-z]/g,String.prototype.toUpperCase),i.style[r]}}return!1}return["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"].forEach((function(t){S.prototype[t]=function(){var e;return(e=this.canvas)[t].apply(e,arguments)}})),S.addMethods=function(t){Object.entries(t).forEach((function(t){var r=e(t,2),n=r[0],o=r[1];S.prototype[n]=function(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(this,r),this}}(o)}))},S.extend=function(t){Object.entries(t).forEach((function(t){var r=e(t,2),n=r[0],o=r[1];S.prototype[n]=o}))},S.addMethods({$line:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=o[0],s=o[1],h=o;i&&"object"===t(i)&&!i.length&&(i.color&&this.$lineColor(i.color),(i.width||i.w)&&this.lineWidth(i.width||i.w),(i.shadow||i.$shadow)&&this.$shadow(i.shadow),h=r(i.coords||i.xy||i.path)),this.beginPath().moveTo.apply(this,h[0]),h.slice(1).forEach((function(t){e.lineTo.apply(e,r(t))})),(s||i.close)&&this.closePath(),this.stroke()},$fill:function(){for(var e=this,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var i=o[0],s=o;return i&&"object"===t(i)&&!i.length&&(i.color&&this.$fillColor(i.color),(i.shadow||i.$shadow)&&this.$shadow(i.shadow),s=r(i.coords||i.xy||i.path)),4===s[0].length?this.$fillRect.apply(this,r(s)):(this.beginPath().moveTo.apply(this,s[0]),s.slice(1).forEach((function(t){e.lineTo.apply(e,r(t))})),this.fill(),this)},$clear:function(){return this.$clearRect.apply(this,arguments),this},$fillRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3];if(i&&"object"===t(i)&&i.length){var u,c=a(n);try{for(c.s();!(u=c.n()).done;){var f=u.value;this.$fillRect.apply(this,r(f))}}catch(t){c.e(t)}finally{c.f()}return this}return this.fillRect(i||0,s||0,h||this.width,l||this.height),this},$clearRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3];if(i&&"object"===t(i)&&i.length){var u,c=a(n);try{for(c.s();!(u=c.n()).done;){var f=u.value;this.$clearRect.apply(this,r(f))}}catch(t){c.e(t)}finally{c.f()}return this}return this.clearRect(i||0,s||0,h||this.width,l||this.height),this},$strokeRect:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3];if(i&&"object"===t(i)&&i.length){var u,c=a(n);try{for(c.s();!(u=c.n()).done;){var f=u.value;this.$strokeRect.apply(this,r(f))}}catch(t){c.e(t)}finally{c.f()}return this}return this.strokeRect(i||0,s||0,h||this.width,l||this.height),this},$arc:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3],u=n[4],c=n[5];if(i&&"object"===t(i)&&i.length){var f,d=a(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;this.$arc.apply(this,r(p))}}catch(t){d.e(t)}finally{d.f()}return this}return this.arc(i,s,h,l,u,c),this},$quadraticCurve:function(){this.$quadratic.apply(this,arguments)},$quadraticCurveTo:function(){this.$quadratic.apply(this,arguments)},$quadratic:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3];if(i&&"object"===t(i)&&i.length){var u,c=a(n);try{for(c.s();!(u=c.n()).done;){var f=u.value;this.$quadratic.apply(this,r(f))}}catch(t){c.e(t)}finally{c.f()}return this}return this.quadraticCurveTo(i,s,h,l),this},$bezierCurve:function(){this.$bezier.apply(this,arguments)},$bezierCurveTo:function(){this.$bezier.apply(this,arguments)},$bezier:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];var i=n[0],s=n[1],h=n[2],l=n[3],u=n[4],c=n[5];if(i&&"object"===t(i)&&i.length){var f,d=a(n);try{for(d.s();!(f=d.n()).done;){var p=f.value;this.$bezier.apply(this,r(p))}}catch(t){d.e(t)}finally{d.f()}return this}return this.bezierCurveTo(i,s,h,l,u,c),this}}),S.extend({$shadowColor:function(t){return"random"===t&&(t=S.randomColor()),this.shadowColor(t)},$fillColor:function(t){return"random"===t&&(t=S.randomColor()),this.fillStyle(t)},$lineColor:function(t){return"random"===t&&(t=S.randomColor()),this.strokeStyle(t)},$imageData:function(){return"object"===t(arguments.length<=0?void 0:arguments[0])&&void 0!==(arguments.length<=1?void 0:arguments[1])?(this.putImageData.apply(this,arguments),this):void 0!==(arguments.length<=2?void 0:arguments[2])?this.getImageData.apply(this,arguments):this.createImageData.apply(this,arguments)},$shadowOffset:function(r,n){if(void 0===r)return[this.shadowOffsetX(),this.shadowOffsetY()];if("object"===t(r)&&!n&&r.length)n=r[1],r=r[0];else if("string"==typeof r&&r.includes(", ")){var o=e(r.split(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*,[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*/),2);r=o[0],n=o[1]}return this.shadowOffsetX(r).shadowOffsetY(n),this},$shadowBlur:function(){this.shadowBlur.apply(this,arguments)},$shadowOffsetY:function(){this.shadowOffsetY.apply(this,arguments)},$shadowOffsetX:function(){this.shadowOffsetX.apply(this,arguments)},$shadow:function(t){var r=this;return void 0===t?{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(Object.entries(t).forEach((function(t){var n=e(t,2),o=n[0],a=n[1];"offset"===o?r.$shadowOffset(a):r["$shadow".concat(o.charAt(0).toUpperCase()+o.slice(1))](a)})),this)}}),S.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},S.randomColor=function(t,e,r,n,o,a){t=t||0,e=e||0,r=r||0,n=n||255,o=o||255,a=a||255;var i=S.randomNumber(t,n),s=S.randomNumber(e,o),h=S.randomNumber(r,a);return"rgb".concat(i,", ").concat(s,", ").concat(h,")")},S.getCSSPropertyValue=function(t,e,n){var o;return void 0!==n?C(document.styleSheets[n],t,e):(r(document.styleSheets).some((function(r){return o=C(r,t,e)})),o)},S.CanvasPixelArray=m,S.ImageData=g,S.Gradient=w,S.Pattern=b,S.canvasElement=$,S}));
//# sourceMappingURL=c2d2.min.js.map
