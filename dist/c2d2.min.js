!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.C2D2=e()}(this,function(){"use strict";function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(e)}function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function r(t){return function(t){if(Array.isArray(t)){for(var e=0,r=new Array(t.length);e<t.length;e++)r[e]=t[e];return r}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function n(t,e){for(var r=0,n=t.length;r<n;r++)e(t[r],r)}function o(t){var e=arguments;"string"==typeof t&&(e=[],n(t.trim().replace(/\s*,\s+/g,", ").split(/\s+/),function(t,r){e[r]=t.split(", ")}));return e}var i="undefined"==typeof window?global:window;function a(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments),this}}function s(e,n,o){return function(i){var a,s=[].slice.call(arguments);return"putImageData"===e&&"object"===t(i)&&i.imageData&&(s[0]=i.imageData),new o(n?this.parent[e]:(a=this.parent)[e].apply(a,r(s)))}}function h(t){return function(){var e;return(e=this.parent)[t].apply(e,arguments)}}function l(t){return function(e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)}}var c={addMethods:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];e.prototype[o]=a(o)}},addGetterMethods:function(t,e,r,n){for(var o=0,i=t.length;o<i;o++){var a=t[o];e.prototype[a]=r?s(a,n,r):h(a)}},addPropertyMethods:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];e.prototype[o]=l(o)}}};function f(t){f.prototype.length||(f.prototype.item=function(t,e){return void 0===e?this.parent[t]:(this.parent[t]=e,this)},c.addPropertyMethods(["length"],f)),this.parent=this.array=this.pixelArray=t}function u(t){u.prototype.width||(c.addGetterMethods(["data"],u,f,!0),c.addPropertyMethods(["width","height","resolution"],u)),this.parent=this.imageData=t}function d(t){d.prototype.addColorStop||c.addMethods(["addColorStop"],d),this.parent=this.gradient=t}function p(t){return this.parent=this.pattern=t,t}function y(e,r){var n=r,o=i.document||null,a="object"!==t(e)||!e.length;a?(n=r=e,e=[]):r=r||{};var s,h=r&&(r.path||r.fileStream);if("string"==typeof r)n=o.getElementById(r);else if("object"===t(r)&&h){n=new(require("canvas"));var l=e[0]||r.width||r.w,c=e[1]||r.height||r.h;l&&(n.width=l),c&&(n.height=c);var f=r.fileStream||r.path;if(f){var u=require("fs").createWriteStream(f),d=n.createPNGStream();d.on("data",function(t){u.write(t)}),d.on("end",function(){u.end()})}}else"object"!==t(r)||r.nodeName?void 0===r&&(n=o.getElementsByTagName("canvas")[0]):(n=o.createElementNS&&null!==o.documentElement.namespaceURI?o.createElementNS("http://www.w3.org/1999/xhtml","canvas"):o.createElement("canvas"),(r.width||r.w)&&n.setAttribute("width",r.width||r.w),(r.height||r.h)&&n.setAttribute("height",r.height||r.h),r.id&&n.setAttribute("id",r.id),r.style&&n.setAttribute("style",r.style),r.innerHTML&&(n.innerHTML=r.innerHTML),(r.class||r.className)&&n.setAttribute("class",r.class||r.className),s=r.appendTo?"string"==typeof r.appendTo?o.getElementById(r.appendTo):r.appendTo:o.body);return!a&&n.setAttribute&&(n.setAttribute("width",e[0]),n.setAttribute("height",e[1])),s&&s.appendChild(n),i.G_vmlCanvasManager&&(n=i.G_vmlCanvasManager.initElement(n)),n}function g(t,e){if(!(this instanceof g))return new g(t,e);var r=this.canvas=y(t,e);return this.context=this.parent=r.getContext("2d"),g.prototype.arc||(c.addMethods(["addHitRegion","arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","commit","drawImage","drawSystemFocusRing","ellipse","fill","fillRect","fillText","getLineDash","lineTo","moveTo","quadraticCurveTo","rect","removeHitRegion","resetClip","resetTransform","restore","rotate","save","scale","scrollPathIntoView","setLineDash","setTransform","stroke","strokeRect","strokeText","transform","translate"],g),c.addGetterMethods(["createImageData","createImageDataHD","getImageData","getImageDataHD","putImageData","putImageDataHD"],g,u),c.addGetterMethods(["createLinearGradient","createRadialGradient"],g,d),c.addGetterMethods(["createPattern"],g,p),c.addGetterMethods(["drawCustomFocusRing","isPointInPath","isPointInStroke","measureText"],g),c.addPropertyMethods(["canvas","currentTransform","direction","fillStyle","font","globalAlpha","globalCompositeOperation","imageSmoothingEnabled","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","strokeStyle","textAlign","textBaseline"],g)),this.width=r.width,this.height=r.height,this}return n(["transferControlToProxy","getContext","probablySupportsContext","supportsContext","setContext","toDataURL","toDataURLHD","toBlob","toBlobHD"],function(t){g.prototype[t]=function(){var e;return(e=this.canvas)[t].apply(e,arguments)}}),g.addMethods=function(t){Object.entries(t).forEach(function(t){var r=e(t,2),n=r[0],o=r[1];g.prototype[n]=function(t){return function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];return t.apply(this,r),this}}(o)})},g.extend=function(t){Object.entries(t).forEach(function(t){var r=e(t,2),n=r[0],o=r[1];g.prototype[n]=o})},g.addMethods({$line:function(e,n){var i;e&&"object"===t(e)&&!e.length?(e.color&&this.$lineColor(e.color),(e.width||e.w)&&this.lineWidth(e.width||e.w),(e.shadow||e.$shadow)&&this.$shadow(e.shadow),i=o.apply(null,e.coords||e.xy||e.path)):i=o.apply(null,arguments),this.beginPath().moveTo.apply(this,i[0]);for(var a=1,s=i.length;a<s;a++)this.lineTo.apply(this,r(i[a]));(n||e.close)&&this.closePath(),this.stroke()},$fill:function(e){var n;if(e&&"object"===t(e)&&!e.length?(e.color&&this.$fillColor(e.color),(e.shadow||e.$shadow)&&this.$shadow(e.shadow),n=o.apply(null,e.coords||e.xy||e.path)):n=o.apply(null,arguments),4===n[0].length)return this.$fillRect.apply(this,r(n));this.beginPath().moveTo.apply(this,n[0]);for(var i=1,a=n.length;i<a;i++)this.lineTo.apply(this,r(n[i]));this.fill()},$clear:function(){this.$clearRect.apply(this,arguments)},$fillRect:function(e,n,o,i){if(e&&"object"===t(e)&&e.length){for(var a=0,s=arguments.length;a<s;a++)this.$fillRect.apply(this,r(arguments[a]));return this}this.fillRect(e||0,n||0,o||this.width,i||this.height)},$clearRect:function(e,n,o,i){if(e&&"object"===t(e)&&e.length){for(var a=0,s=arguments.length;a<s;a++)this.$clearRect.apply(this,r(arguments[a]));return this}this.clearRect(e||0,n||0,o||this.width,i||this.height)},$strokeRect:function(e,n,o,i){if(e&&"object"===t(e)&&e.length){for(var a=0,s=arguments.length;a<s;a++)this.$strokeRect.apply(this,r(arguments[a]));return this}this.strokeRect(e||0,n||0,o||this.width,i||this.height)},$arc:function(e,n,o,i,a,s){if(e&&"object"===t(e)&&e.length){for(var h=0,l=arguments.length;h<l;h++)this.$arc.apply(this,r(arguments[h]));return this}this.arc(e,n,o,i,a,s)},$quadraticCurve:function(){this.$quadratic.apply(this,arguments)},$quadraticCurveTo:function(){this.$quadratic.apply(this,arguments)},$quadratic:function(e,n,o,i){if(e&&"object"===t(e)&&e.length){for(var a=0,s=arguments.length;a<s;a++)this.$quadratic.apply(this,r(arguments[a]));return this}this.quadraticCurveTo(e,n,o,i)},$bezierCurve:function(){this.$bezier.apply(this,arguments)},$bezierCurveTo:function(){this.$bezier.apply(this,arguments)},$bezier:function(e,n,o,i,a,s){if(e&&"object"===t(e)&&e.length){for(var h=0,l=arguments.length;h<l;h++)this.$bezier.apply(this,r(arguments[h]));return this}this.bezierCurveTo(e,n,o,i,a,s)}}),g.extend({$shadowColor:function(t){return"random"===t&&(t=g.randomColor()),this.shadowColor(t)},$fillColor:function(t){return"random"===t&&(t=g.randomColor()),this.fillStyle(t)},$lineColor:function(t){return"random"===t&&(t=g.randomColor()),this.strokeStyle(t)},$imageData:function(){return"object"===t(arguments.length<=0?void 0:arguments[0])&&void 0!==(arguments.length<=1?void 0:arguments[1])?(this.putImageData.apply(this,arguments),this):void 0!==(arguments.length<=2?void 0:arguments[2])?this.getImageData.apply(this,arguments):this.createImageData.apply(this,arguments)},$shadowOffset:function(r,n){if(void 0===r)return[this.shadowOffsetX(),this.shadowOffsetY()];if("object"===t(r)&&!n&&r.length)n=r[1],r=r[0];else if("string"==typeof r&&-1!==r.indexOf(", ")){var o=e(r.split(/\s*,\s*/),2);r=o[0],n=o[1]}return this.shadowOffsetX(r).shadowOffsetY(n),this},$shadowBlur:function(){this.shadowBlur.apply(this,arguments)},$shadowOffsetY:function(){this.shadowOffsetY.apply(this,arguments)},$shadowOffsetX:function(){this.shadowOffsetX.apply(this,arguments)},$shadow:function(t){var r=this;return void 0===t?{offset:this.$shadowOffset(),blur:this.shadowBlur(),color:this.$shadowColor(),offsetX:this.shadowOffsetX(),offsetY:this.shadowOffsetY()}:(Object.entries(t).forEach(function(t){var n=e(t,2),o=n[0],i=n[1];"offset"===o?r.$shadowOffset(i):r["$shadow".concat(o.charAt(0).toUpperCase()+o.slice(1))](i)}),this)}}),g.randomNumber=function(t,e){return t=t||0,e=e||1,Math.floor(Math.random()*(e-t+1))+t},g.randomColor=function(t,e,r,n,o,i){t=t||0,e=e||0,r=r||0,n=n||255,o=o||255,i=i||255;var a=g.randomNumber(t,n),s=g.randomNumber(e,o),h=g.randomNumber(r,i);return"rgb".concat(a,", ").concat(s,", ").concat(h,")")},g.getCSSPropertyValue=function(t,e,r){function n(t,e,r){for(var n=t.cssRules||t.rules,o=0,i=n.length;o<i;o++){var a=n[o];try{if(1===a.type&&a.selectorText===e)return a.style.getPropertyValue(r)}catch(t){if(a.selectorText===e)return r=r.replace(/-([a-z])/g,String.prototype.toUpperCase),a.style[r]}}return!1}var o;if(void 0!==r)return n(document.styleSheets[r],t,e);for(var i=0,a=document.styleSheets.length;i<a&&!(o=n(document.styleSheets[i],t,e));i++);return o},g.CanvasPixelArray=f,g.ImageData=u,g.Gradient=d,g.Pattern=p,g.canvasElement=y,g});
//# sourceMappingURL=c2d2.min.js.map
